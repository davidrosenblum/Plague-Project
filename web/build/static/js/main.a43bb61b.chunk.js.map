{"version":3,"sources":["Ajax.js","EventEmitter.js","SimulationUpdateEvent.js","Simulator.js","ParamStorage.js","components/NumSlider.jsx","preset.js","components/Inputs.jsx","components/MailModal.jsx","components/Navbar.jsx","components/Chart.jsx","components/Graph.jsx","components/App.jsx","index.js"],"names":["Ajax","Object","classCallCheck","this","createClass","key","value","options","arguments","length","undefined","Promise","resolve","reject","method","url","window","location","origin","headers","query","data","xhr","XMLHttpRequest","h","onload","onerror","err","queryString","open","setRequestHeader","send","JSON","stringify","request","dict","qs","param","concat","substring","EventEmitter","_listeners","event","willTrigger","type","forEach","listener","eventType","push","listeners","i","splice","SimulationUpdateEvent","day","_type","_day","get","src_Simulator","_EventEmitter","Simulator","_this","possibleConstructorReturn","getPrototypeOf","call","_currentDay","_firstInvalidDay","_useErrCorrecting","inherits","_this2","href","includes","Access-Control-Allow-Origin","Error-Correction","isErrCorrecting","then","status","parse","response","parseInt","getResponseHeader","emit","Event","Error","catch","_this3","Content-Type","csvDataBlob","Blob","a","document","createElement","URL","createObjectURL","setAttribute","click","revokeObjectURL","message","currentDay","set","maxDays","hasData","Math","min","src_ParamStorage","ParamStorage","_numParamSets","_lastParamSet","_currDay","sessionStorage","clear","params","infectionLength","infection_length","transmissionRate","transmission_rate","virulence","initialPopulation","initial_population","immunePercent","immune_percent","initialInfected","initial_infected","simulationLength","simulation_length","preset","paramsNotLastSave","setItem","numParamSets","saveParamsInputsDict","newParams","paramId","json","getItem","getSavedParams","NumSlider","_React$Component","props","numRef","React","createRef","rangeRef","current","init","evt","val","parseFloat","target","max","react_default","className","label","showRange","minText","maxText","ref","onChange","onNumber","bind","step","placeholder","required","disabled","onSlide","n","Component","presets","Seasonal Flu","Infection Length","Transmission","Virulence","Smallpox","Polio","Measles","Ebola","H1N1 Flu","H5N1 Flu","1918 Flu","Inputs","intialImmunityRef","transmissionRef","virulenceRef","initialInfectedRef","intialPopRef","infectionLengthRef","daysRef","presetRef","state","pending","lastBtn","isDisabled","on","onSimulatorLoad","onSimulatorError","URLSearchParams","search","getInputsDictionary","setState","reset","nextDay","load","autoRun","_this4","downloadCSVFile","preventDefault","dayByDay","downloadCSV","getAttribute","direction","stepBackwards","stepForwards","currentParams","onPresetChange","_this5","id","onClick","switchParamSet","onSubmit","NumSlider_NumSlider","onFormClick","btn","onReset","MailModal","textRef","errorRef","headerRef","typeError","errorTime","errorMsg","other","errMessage","successMessage","prevProps","showModal","e","goodHeader","BuildArray","post","text","lib_default","isOpen","closeModal","submitClick","onTypeSelect","name","TypeOther","rows","cols","Navbar","showNav","showAdvanced","prev","reactstrap_es","color","expand","toggleNavbar","navbar","openModal","toggle","toggleDropdown","caret","toggleErrorCorrection","MailModal_MailModal","Chart","onSimulatorData","onSimulatorReset","onSimulatorUpdate","Array","_loop","susceptible","round","Susceptible","infected","Infected","immune","Immune","dead","Dead","population","TotalPopulation","style","tooltip","firstInvalidDay","borderLeft","borderRight","title","setGraphDay","renderRows","Graph","yLabel","onSimulatorUpdateGraph","prevState","values","valuesObj","row","pt","x","y","labels","largestY","getDataForAllLabels","toLowerCase","COLORS","getData","numDays","onYLabelChange","react_easy_chart_lib","width","height","margin","top","bottom","left","right","axes","axisLabels","interpolate","dataPoints","xDomainRange","yDomainRange","lineColors","map","clickHandler","onGraphClick",".label","fill",".axis","fontSize","fontFamily","App","apply","Navbar_Navbar","Inputs_Inputs","Graph_Graph","Chart_Chart","ReactDOM","render","App_App","querySelector"],"mappings":"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","file":"static/js/main.a43bb61b.chunk.js","sourcesContent":["export class Ajax{\r\n    // sends an async http request \r\n    static request(options={}){\r\n        return new Promise((resolve, reject) => {\r\n            // extract config from options object\r\n            let method = (typeof options.method === \"string\") ? options.method : \"GET\",\r\n                url = (typeof options.url === \"string\") ? options.url : window.location.origin,\r\n                headers = (typeof options.headers === \"object\" && options.headers) ? options.headers : {},\r\n                query = (typeof options.query === \"object\" && options.query) ? options.query : {},\r\n                data = (typeof options.data !== \"undefined\") ? options.data : null;\r\n\r\n            // create the request\r\n            let xhr = new XMLHttpRequest();\r\n\r\n            // attach listeners\r\n            xhr.onload = () => resolve(xhr);\r\n            xhr.onerror = err => reject(err);\r\n\r\n            // apply query string\r\n            if(query){\r\n                url += Ajax.queryString(query);\r\n            }\r\n\r\n            // open the request\r\n            xhr.open(method, url);\r\n\r\n            // apply http headers\r\n            for(let h in headers){\r\n                xhr.setRequestHeader(h, headers[h]);\r\n            }\r\n\r\n            // send the request\r\n            // send JSON if the data is not a string\r\n            if(data){\r\n                if(typeof data !== \"string\"){\r\n                    xhr.send(JSON.stringify(data));\r\n                }\r\n                else xhr.send(data);\r\n            }\r\n            else xhr.send();\r\n        });\r\n    }\r\n\r\n    // async http get request\r\n    static get(url, headers, query){\r\n        return Ajax.request({method: \"GET\", url, headers, query});\r\n    }\r\n\r\n    // async http post request\r\n    static post(url, headers, data){\r\n        return Ajax.request({method: \"POST\", url, headers, data});\r\n    }\r\n\r\n    // creates a query string from an object\r\n    static queryString(dict){\r\n        let qs = \"?\";\r\n\r\n        for(let param in dict){\r\n            qs += `${param}=${dict[param]}&`;\r\n        }\r\n\r\n        return qs.substring(0, qs.length - 1);\r\n    }\r\n}","// simple event emitter class\r\nexport class EventEmitter{\r\n    constructor(){\r\n        this._listeners = {};   // 'private' dictionary of {eventType: listenerFunction}\r\n    }\r\n\r\n    // triggers all listening functions\r\n    emit(event){\r\n        if(this.willTrigger(event.type)){\r\n            this._listeners[event.type].forEach(listener => listener(event));\r\n        }\r\n    }\r\n\r\n    // adds a listener\r\n    on(eventType, listener){\r\n        if(this.willTrigger(eventType)){\r\n            this._listeners[eventType].push(listener);\r\n        }\r\n        else{\r\n            this._listeners[eventType] = [listener];\r\n        }\r\n    }\r\n\r\n    // removes a listener\r\n    off(eventType, listener){\r\n        if(this.willTrigger(eventType)){\r\n            let listeners = this._listeners[eventType];\r\n\r\n            for(let i = 0; i < listeners.length; i++){\r\n                if(listeners[i] === listener){\r\n                    listeners.splice(i, 1);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // checks if there are any listeners for a given type\r\n    willTrigger(eventType){\r\n        return eventType in this._listeners;\r\n    }\r\n}","// simple event object for simulation updates \r\nexport class SimulationUpdateEvent{\r\n    constructor(type, day=null){\r\n        this._type = type;\r\n        this._day = day;\r\n    }\r\n\r\n    get type(){\r\n        return this._type;\r\n    }\r\n\r\n    get day(){\r\n        return this._day;\r\n    }\r\n}","import { Ajax } from \"./Ajax\";\r\nimport { EventEmitter } from \"./EventEmitter\";\r\nimport { SimulationUpdateEvent } from \"./SimulationUpdateEvent\";\r\n\r\n// singleton for holding simulation data\r\n// event-driven to keep chart + graph updated\r\nlet Simulator = class Simulator extends EventEmitter{\r\n    constructor(){\r\n        super();\r\n\r\n        this.data = null;                   // simulation data array\r\n        this._currentDay = 0;               // 'private' current simulation day\r\n        this._firstInvalidDay = -1;         // first invalid day (-1 = no invalid days)\r\n        this._useErrCorrecting = true;      // use error correction?\r\n    }\r\n\r\n    // hits the API for data, signals progress\r\n    // query should be a dictionary of the inputs, will be converted into a query string\r\n    load(query){\r\n        return new Promise((resolve, reject) => {\r\n            // figure out endpoint\r\n            let url = window.location.href.includes(\"localhost\") ? \"http://localhost:8080/plague\" : `${window.location.origin}/plague`;\r\n            \r\n            // CORS headers (use foreign domain)\r\n            let headers = {\r\n                \"Access-Control-Allow-Origin\": window.location.origin,\r\n                \"Error-Correction\": this.isErrCorrecting\r\n            };\r\n\r\n            // ajax call with query string\r\n            // (null headers)\r\n            Ajax.get(url, headers, query)\r\n                .then(xhr => {    \r\n                    // ajax resolved (could be bad/good request, but server responded)\r\n                    if(xhr.status === 200){\r\n                        // good request - attempt to parse results json\r\n                        try{\r\n                            // parse json\r\n                            this.data = JSON.parse(xhr.response);\r\n\r\n                            // extract first invalid day\r\n                            this._firstInvalidDay = parseInt(xhr.getResponseHeader(\"First-Invalid-Day\")) || -1;\r\n                        }\r\n                        catch(err){\r\n                            // json parse error (should never happen)\r\n                            reject(err);\r\n                            this.emit(new Event(\"error\"));  // server responded with bad request signal\r\n                        }\r\n\r\n                        // done, resolve promise and emit load + data\r\n                        resolve();\r\n                        this.emit(new Event(\"load\"));   // server responded with good request signal\r\n\r\n                        this.emit(new Event(\"data\"));   // parsed data signal\r\n                    }\r\n                    else{\r\n                        // bad request\r\n                        reject(new Error(xhr.response || \"Bad request\"));\r\n                        this.emit(new Event(\"error\"));  // server responded with bad request signal\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    // ajax request died (really bad NOT a 400 error!)\r\n                    reject(err);\r\n                    this.emit(new Event(\"error\"));  // request died signal\r\n                });\r\n        });\r\n    }\r\n\r\n    // asychronously downloads a csv file using ajax\r\n    downloadCSVFile(query){\r\n        return new Promise((resolve, reject) => {\r\n            // figure out endpoint origin\r\n            let origin = window.location.origin.includes(\"localhost\") ? \"http://localhost:8080\" : window.location.origin;\r\n\r\n            // figure out endpoint using origin\r\n            let url = `${origin}/plague`;\r\n\r\n            // http request headers\r\n            let headers = {\r\n                \"Access-Control-Allow-Origin\": window.location.origin,\r\n                \"Content-Type\": \"text/csv\",\r\n                \"Error-Correction\": this.isErrCorrecting\r\n            };\r\n\r\n            // get csv file via Ajax\r\n            Ajax.get(url, headers, query)\r\n                .then(xhr => {\r\n                    // server responded\r\n                    if(xhr.status === 200){\r\n                        // good http status - download\r\n                        // xhr.response = csv text\r\n                        // convert to blob\r\n                        let csvDataBlob = new Blob([xhr.response], {type: \"octet/stream\"});\r\n\r\n                        // create a 'secret' link using the blob\r\n                        let a = document.createElement(\"a\");\r\n                        let url = window.URL.createObjectURL(csvDataBlob);\r\n\r\n                        // setup the link to download blob data\r\n                        a.setAttribute(\"download\", \"data.csv\");\r\n                        a.setAttribute(\"href\", url);\r\n\r\n                        // click the link to download the file\r\n                        a.click();\r\n                        window.URL.revokeObjectURL(url);\r\n\r\n                        // trigger any listeners\r\n                        resolve(\"File downloaded.\");\r\n                    }\r\n                    else{\r\n                        // bad http status - trigger listeners with error\r\n                        reject(new Error(xhr.response || \"Error downloading CSV file.\"));\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    // server did not responed - trigger listeners with error\r\n                    reject(new Error(err.message || \"Unable to download CSV file.\"))\r\n                });\r\n        });\r\n    }\r\n\r\n    // simulation moves to the last day\r\n    // (triggers listeners)\r\n    autoRun(){\r\n        this.currentDay = this.data.length - 1; // auto emits update\r\n    }\r\n\r\n    // steps the simulation forward one day\r\n    // (triggers listeners)\r\n    nextDay(){\r\n        if(this.currentDay < this.data.length){\r\n            this.currentDay++;  // auto emits update\r\n        }\r\n    }\r\n\r\n    // resets simulation to day 0 and clears all stored data\r\n    // (triggers listeners)\r\n    reset(){\r\n        this.data = null;\r\n        this.currentDay = 0;\r\n        this.emit(new Event(\"reset\"));\r\n    }\r\n\r\n    // updates the graph day \r\n    setGraphDay(day){\r\n        this.emit(new SimulationUpdateEvent(\"update-graph\", day));\r\n    }\r\n\r\n    // always emit update\r\n    set currentDay(day){\r\n        let maxDays = this.hasData ? (this.data.length - 1) : 0;\r\n        this._currentDay = Math.min(day, maxDays); \r\n        this.emit(new SimulationUpdateEvent(\"update\", this.currentDay));\r\n    }\r\n\r\n    set isErrCorrecting(value){\r\n        if(typeof value === \"boolean\"){\r\n            this._useErrCorrecting = value;\r\n        }\r\n        else throw new Error(\"isErrCorrecting must be set to a boolean value.\");\r\n    }\r\n\r\n    get hasData(){\r\n        return this.data !== null;\r\n    }\r\n\r\n    get currentDay(){\r\n        return this._currentDay;\r\n    }\r\n\r\n    get firstInvalidDay(){\r\n        return this._firstInvalidDay;\r\n    }\r\n\r\n    get isErrCorrecting(){\r\n        return this._useErrCorrecting;\r\n    }\r\n}\r\n\r\n// singleton\r\nexport default new Simulator();","class ParamStorage{\r\n    constructor(){\r\n        this._numParamSets = 0;\r\n        this._lastParamSet = null;\r\n        this._currDay = 0;\r\n\r\n        window.sessionStorage.clear();\r\n    }\r\n    \r\n    // saves parameters to session storage - expects query string format (as provided by inputs.jsx)\r\n    saveParamsInputsDict(dict){\r\n        let params = {\r\n            infectionLength:    dict.infection_length,\r\n            transmissionRate:   dict.transmission_rate,\r\n            virulence:          dict.virulence,\r\n            initialPopulation:  dict.initial_population,\r\n            immunePercent:      dict.immune_percent,\r\n            initialInfected:    dict.initial_infected,\r\n            simulationLength:   dict.simulation_length,\r\n            preset:             dict.preset\r\n        };\r\n\r\n        // prevent saving multiple set same time in a row\r\n        if(this.paramsNotLastSave(params)){\r\n            window.sessionStorage.setItem(++this._numParamSets, JSON.stringify(params))\r\n            this._currDay = this.numParamSets;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // saves parameters to session storage\r\n    saveParams(infectionLength, transmissionRate, virulence, initialPopulation, immunePercent, initialInfected, simulationLength, preset){\r\n        return this.saveParamsInputsDict({\r\n            infection_length:   infectionLength,\r\n            transmission_rate:  transmissionRate,\r\n            virulence,\r\n            initial_population: initialPopulation,\r\n            immune_percent:     immunePercent,\r\n            initial_infected:   initialInfected,\r\n            simulation_length:  simulationLength,\r\n            preset\r\n        });\r\n    }\r\n\r\n    // checks if 'newParams' is content different from the last save param set\r\n    paramsNotLastSave(newParams){\r\n        if(!this._lastParamSet) return true;\r\n\r\n        for(let param in this._lastParamSet){\r\n            if(this._lastParamSet[param] !== newParams[param]){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    // gets saved parameters\r\n    getSavedParams(paramId){\r\n        let json = window.sessionStorage.getItem(paramId) || null;\r\n        return json ? JSON.parse(json) : null;\r\n    }\r\n\r\n    // moves current day one into the backwards\r\n    stepBackwards(){\r\n        if(this._currDay - 1 >= 0){\r\n            this._lastParamSet = this.getSavedParams(--this._currDay);\r\n        }\r\n    }\r\n\r\n    // move sthe current day one day forwards\r\n    stepForwards(){\r\n        if(this._currDay + 1 <= this.numParamSets){\r\n            this._lastParamSet = this.getSavedParams(++this._currDay);\r\n        }\r\n    }\r\n\r\n    get currentParams(){\r\n        return this.getSavedParams(this._currDay);\r\n    }\r\n\r\n    get currentDay(){\r\n        return this._currDay;\r\n    }\r\n\r\n    get numParamSets(){\r\n        return this._numParamSets;\r\n    }\r\n}\r\n\r\nexport default new ParamStorage();","import \"./NumSlider.css\";\r\nimport React from \"react\";\r\n\r\nexport class NumSlider extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.numRef = React.createRef();\r\n        this.rangeRef = React.createRef();\r\n    }\r\n\r\n    // mounted - set the default numbers\r\n    componentDidMount(){\r\n        this.numRef.current.value = this.props.init || this.props.min;\r\n        this.rangeRef.current.value = this.props.init || this.props.min;\r\n    }\r\n\r\n    // on text field input\r\n    onNumber(evt){\r\n        // set the range value to the number value\r\n        let val = parseFloat(evt.target.value);\r\n    \r\n        if(val){\r\n            // enforce min/max constraints\r\n            val = Math.min(Math.max(val, this.props.min), this.props.max); \r\n\r\n            // update inputs\r\n            this.numRef.current.value = val;\r\n            this.rangeRef.current.value = val;\r\n        }\r\n        else{\r\n            // empty input - range at min and number will be empty\r\n            this.rangeRef.current.value = this.props.min;\r\n        }\r\n    }\r\n\r\n    // on range bar move\r\n    onSlide(evt){\r\n        // set the text value to the number value\r\n        let val = evt.target.value;\r\n\r\n        // enforce min/max constraints \r\n        val = Math.min(Math.max(val, this.props.min), this.props.max);\r\n\r\n        // update number input\r\n        this.numRef.current.value = val;\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"num-slider-container\">\r\n                <div>\r\n                    <label>{this.props.label}</label>\r\n                    {this.props.showRange ? (` ${this.minText}-${this.maxText}`) : null}\r\n                </div>\r\n                <div>\r\n                    <input \r\n                        ref={this.numRef}\r\n                        onChange={this.onNumber.bind(this)}\r\n                        type=\"number\"\r\n                        min={this.props.min}\r\n                        max={this.props.max}\r\n                        step={this.props.step}\r\n                        placeholder={this.props.placeholder}\r\n                        required={this.props.required}\r\n                        disabled={this.props.disabled}\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <input\r\n                        ref={this.rangeRef}\r\n                        onChange={this.onSlide.bind(this)}\r\n                        type=\"range\"\r\n                        min={this.props.min}\r\n                        max={this.props.max}\r\n                        step={this.props.step}\r\n                        disabled={this.props.disabled}\r\n                        className=\"num-slider-slider\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    set value(n){\r\n        this.numRef.current.value = n;\r\n        this.rangeRef.current.value = n;\r\n    }\r\n\r\n    get minText(){\r\n        return this.props.minText ? this.props.minText : this.props.min;\r\n    }\r\n\r\n    get maxText(){\r\n        return this.props.maxText ? this.props.maxText : this.props.max;\r\n    }\r\n\r\n    get value(){\r\n        return this.numRef.current.value;\r\n    }\r\n}","export const presets ={\r\n    //presets in the inputs go here\r\n    //seasonal flu\r\n   \"Seasonal Flu\":{\r\n       \"Infection Length\": 8,\r\n       \"Transmission\": 1.2,\r\n       \"Virulence\": 0.01\r\n   },\r\n   //smallpox\r\n   \"Smallpox\":{\r\n    \"Infection Length\": 14,\r\n    \"Transmission\": 2.5,\r\n    \"Virulence\": 0.25 \r\n   },\r\n   //polio\r\n   \"Polio\":{\r\n    \"Infection Length\": 18,\r\n    \"Transmission\": 1,\r\n    \"Virulence\": 0.01 \r\n   },\r\n   //measles\r\n   \"Measles\":{\r\n    \"Infection Length\": 8,\r\n    \"Transmission\": 10,\r\n    \"Virulence\": 0.01 \r\n   },\r\n   //Ebola\r\n   \"Ebola\":{\r\n    \"Infection Length\": 13,\r\n    \"Transmission\": 1.5,\r\n    \"Virulence\": 0.75 \r\n   },\r\n    //H1N1 Flu\r\n    \"H1N1 Flu\":{\r\n    \"Infection Length\": 8,\r\n    \"Transmission\": 1.6,\r\n    \"Virulence\": 0.01 \r\n    },\r\n    //H5N1 Flu\r\n   \"H5N1 Flu\":{\r\n    \"Infection Length\": 8,\r\n    \"Transmission\": 0.1,\r\n    \"Virulence\": 0.6 \r\n   },\r\n    //1918 Flu\r\n    \"1918 Flu\":{\r\n    \"Infection Length\": 8,\r\n    \"Transmission\": 2,\r\n    \"Virulence\": 0.03 \r\n    }\r\n}\r\nexport default presets;\r\n","import React from \"react\";\r\nimport Simulator from \"../Simulator\";\r\nimport ParamStorage from \"../ParamStorage\";\r\nimport { NumSlider } from \"./NumSlider\";\r\nimport preset from \"../preset\"\r\n\r\nexport class Inputs extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        // input refs\r\n        this.intialImmunityRef = React.createRef();\r\n        this.transmissionRef = React.createRef();\r\n        this.virulenceRef = React.createRef();\r\n        this.initialInfectedRef = React.createRef();\r\n        this.intialPopRef = React.createRef();\r\n        this.infectionLengthRef = React.createRef();\r\n        this.daysRef = React.createRef();\r\n        this.presetRef = React.createRef();\r\n\r\n        this.state = {\r\n            pending: false,         // no new requests while pending (disable buttons)\r\n            message: null,          // message to display (errors)\r\n            lastBtn: null,\r\n            isDisabled: false       // to disable/enable fields depending on what preset is selected\r\n        };\r\n    }\r\n\r\n    componentDidMount(){\r\n        Simulator.on(\"load\", this.onSimulatorLoad.bind(this));\r\n        Simulator.on(\"error\", this.onSimulatorError.bind(this));\r\n\r\n        // test values\r\n        if(new URLSearchParams(window.location.search).get(\"test\") === \"true\"){\r\n            this.initialInfectedRef.current.value = 500;\r\n            this.intialImmunityRef.current.value = 0.10;\r\n            this.intialPopRef.current.value = 1000000;\r\n            this.virulenceRef.current.value = 0.25;\r\n            this.daysRef.current.value = 365;\r\n            this.infectionLengthRef.current.value = 100;\r\n            this.transmissionRef.current.value = 0.2;\r\n\r\n            ParamStorage.saveParamsInputsDict(this.getInputsDictionary());\r\n        }\r\n    }\r\n\r\n    // creates a dictionary of all the inputs and their values (names formatted for the API call) \r\n    getInputsDictionary(){\r\n        // extract data from inputs to use in query string \r\n        let immune_percent =        this.intialImmunityRef.current.value,\r\n            transmission_rate =     this.transmissionRef.current.value,\r\n            virulence =             this.virulenceRef.current.value,\r\n            initial_infected =      this.initialInfectedRef.current.value,\r\n            initial_population =    this.intialPopRef.current.value,\r\n            infection_length =      this.infectionLengthRef.current.value,\r\n            simulation_length =     this.daysRef.current.value,\r\n            preset =                this.presetRef.current.value;\r\n\r\n        // make sure infected <= population\r\n        initial_infected = Math.min(initial_infected, initial_population);\r\n\r\n        // MUST match API expectations! \r\n        return {immune_percent, transmission_rate, virulence, initial_infected, initial_population, infection_length, simulation_length, preset};\r\n    }\r\n\r\n    onSimulatorError(){\r\n        this.setState({pending: false});    // enable buttons\r\n    }\r\n\r\n    onSimulatorLoad(){\r\n        this.setState({pending: false});    // enable buttons\r\n    }\r\n\r\n    // called when then the reset button is clicked\r\n    onReset(){\r\n        // cleared stored simulation data\r\n        Simulator.reset();\r\n    }\r\n\r\n    dayByDay(){\r\n        if(!Simulator.hasData){\r\n            // disable buttons for loading time\r\n            this.setState({pending: true});\r\n\r\n            // load data then show next day\r\n            Simulator.load(this.getInputsDictionary())\r\n                .then(() => {\r\n                    this.setState({message: null}); // remove possible err message\r\n                    Simulator.nextDay();\r\n\r\n                    ParamStorage.saveParamsInputsDict(this.getInputsDictionary());  // save parameters\r\n                })\r\n                .catch(err => this.setState({message: err.message}));\r\n        }\r\n        else{\r\n            Simulator.nextDay();\r\n        }\r\n    }\r\n\r\n    autoRun(){\r\n        if(!Simulator.hasData){\r\n            // disable buttons for loading time\r\n            this.setState({pending: true});\r\n\r\n            // load data then auto run\r\n            Simulator.load(this.getInputsDictionary())\r\n                .then(() => {\r\n                    this.setState({message: null}); // remove possible err message\r\n                    Simulator.autoRun();\r\n\r\n                    ParamStorage.saveParamsInputsDict(this.getInputsDictionary());  // save parameters\r\n                })\r\n                .catch(err => this.setState({message: err.message}));\r\n        }\r\n        else{\r\n            Simulator.autoRun();\r\n        }\r\n    }\r\n\r\n    // downloads the csv file\r\n    downloadCSV(){\r\n        if(!this.state.pending){\r\n            // disable buttons\r\n            this.setState({pending: true});\r\n\r\n            Simulator.downloadCSVFile(this.getInputsDictionary())\r\n                .catch(err => {\r\n                    // something went wrong (server did not respond or bad request)\r\n                    this.setState({message: err.message});\r\n                })\r\n                .then(() => {\r\n                    // (this fires when any response happens not successful only!)\r\n                    // always enable buttons\r\n                    this.setState({pending: false})\r\n                });\r\n        }\r\n    }\r\n\r\n    // called when the form is 'submitted'\r\n    // entire purpose is to block the sending of the form\r\n    // (submit enforces 'required', 'min', 'max' constraints)\r\n    onSubmit(evt){\r\n        // no default submission (using ajax instead)\r\n        evt.preventDefault();\r\n\r\n        // problem - both autorun + next day activate this... (only way to do it with using form requires)\r\n\r\n        // day-by-day was the trigger\r\n        if(this.state.lastBtn === \"day-by-day\"){\r\n            this.dayByDay();\r\n        }\r\n\r\n        // autorun was the trigger\r\n        else if(this.state.lastBtn === \"auto-run\"){\r\n            this.autoRun();\r\n        }\r\n\r\n        // csv export was the trigger\r\n        else if(this.state.lastBtn === \"export-csv\"){\r\n            this.downloadCSV();\r\n        }\r\n        \r\n    }\r\n\r\n    // sets the last button to 'day-by-day' or 'autorun'\r\n    // kinda ugly but its because form has 2 submit buttons\r\n    onFormClick(evt){\r\n        this.setState({lastBtn: evt.target.getAttribute(\"btn\")});\r\n    }\r\n\r\n    onPresetChange(){\r\n        let value = this.presetRef.current.value;\r\n        \r\n        if(value !== \"Custom\"){\r\n            this.setState({isDisabled: true});\r\n            this.infectionLengthRef.current.value = preset[value][\"Infection Length\"];\r\n            this.transmissionRef.current.value = preset[value][\"Transmission\"];\r\n            this.virulenceRef.current.value = preset[value][\"Virulence\"]\r\n        }else{\r\n            this.setState({isDisabled: false});\r\n        }\r\n    }\r\n\r\n    // moves the parameter storage day & updates UI inputs\r\n    switchParamSet(direction){\r\n        // move the day\r\n        if(direction === \"backwards\"){\r\n            ParamStorage.stepBackwards();\r\n        }\r\n        else if(direction === \"forwards\"){\r\n            ParamStorage.stepForwards();\r\n        }\r\n        else throw new Error(\"Parameter switch direction must be 'forwards' or 'backwards'.\");\r\n\r\n        // bail if nothing already saved\r\n        let params = ParamStorage.currentParams || null;\r\n        if(!params) return; // nothing saved\r\n\r\n        // fill out UI form\r\n        this.infectionLengthRef.current.value = params.infectionLength;\r\n        this.transmissionRef.current.value = params.transmissionRate;\r\n        this.virulenceRef.current.value = params.virulence;\r\n        this.intialPopRef.current.value = params.initialPopulation;\r\n        this.intialImmunityRef.current.value = params.immunePercent;\r\n        this.initialInfectedRef.current.value = params.initialInfected;\r\n        this.daysRef.current.value = params.simulationLength;\r\n\r\n        this.presetRef.current.value = params.preset;\r\n        this.onPresetChange();\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div>\r\n                <div id=\"inputs-header-container\" className=\"text-center\">\r\n                    <button onClick={() => this.switchParamSet(\"backwards\")}>&larr;</button>\r\n                    <h5 className=\"text-center\">Experimental Variables</h5>\r\n                    <button onClick={() => this.switchParamSet(\"forwards\")}>&rarr;</button>\r\n                </div>\r\n                <br/>\r\n                <form onSubmit={this.onSubmit.bind(this)}>\r\n                    <div className=\"row\">\r\n                        <div className=\"form-group col-lg-6\">\r\n                            <NumSlider\r\n                                label={\"Length of Infection (Days)\"}\r\n                                showRange={true}\r\n                                min={1}\r\n                                max={365}\r\n                                step={1}\r\n                                required={true}\r\n                                ref={this.infectionLengthRef}\r\n                                disabled={this.state.isDisabled}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group col-lg-6\">\r\n                            <NumSlider\r\n                                label={\"Transmission Rate\"}\r\n                                showRange={true}\r\n                                min={0}\r\n                                max={20}\r\n                                step={0.01}\r\n                                required={true}\r\n                                ref={this.transmissionRef}\r\n                                disabled={this.state.isDisabled}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"form-group col-lg-6\">\r\n                            <NumSlider\r\n                                label={\"Virulence\"}\r\n                                showRange={true}\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.001}\r\n                                required={true}\r\n                                ref={this.virulenceRef}\r\n                                disabled={this.state.isDisabled}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group col-lg-6\">\r\n                            <NumSlider\r\n                                label={\"Initial Population\"}\r\n                                showRange={true}\r\n                                min={1}\r\n                                max={1000000}\r\n                                step={1}\r\n                                required={true}\r\n                                ref={this.intialPopRef}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"form-group col-lg-6\">\r\n                            <NumSlider\r\n                                label={\"Initial Immunity Percent\"}\r\n                                showRange={true}\r\n                                min={0}\r\n                                max={1}\r\n                                step={0.01}\r\n                                required={true}\r\n                                ref={this.intialImmunityRef}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group col-lg-6\">\r\n                            <NumSlider\r\n                                label={\"Initial Infected\"}\r\n                                showRange={true}\r\n                                min={0}\r\n                                max={1000000}\r\n                                maxText={\"Population\"}\r\n                                step={1}\r\n                                required={true}\r\n                                ref={this.initialInfectedRef}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"form-group col-lg-6\">\r\n                            <NumSlider\r\n                                label={\"Simulation Length (Days)\"}\r\n                                showRange={true}\r\n                                min={1}\r\n                                max={365}\r\n                                step={1}\r\n                                required={true}\r\n                                ref={this.daysRef}\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group col-lg-6\">\r\n                            <label>Presets:</label>\r\n                            <select ref={this.presetRef} className=\"form-control\" onChange={this.onPresetChange.bind(this)}>\r\n                                <option>Custom</option>\r\n                                <option>Seasonal Flu</option>\r\n                                <option>Smallpox</option>\r\n                                <option>Polio</option>\r\n                                <option>Measles</option>\r\n                                <option>Ebola</option>\r\n                                <option>H1N1 Flu</option>\r\n                                <option>H5N1 Flu</option>\r\n                                <option>1918 Flu</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group text-center\">\r\n                        <button onClick={this.onFormClick.bind(this)} className=\"input-btn\" disabled={this.state.pending} btn=\"day-by-day\">Day-By-Day</button>&nbsp;\r\n                        <button onClick={this.onFormClick.bind(this)} className=\"input-btn\" disabled={this.state.pending} btn=\"auto-run\">Auto Run</button>&nbsp;\r\n                        <button onClick={this.onReset.bind(this)} className=\"input-btn\" disabled={this.state.pending} type=\"button\" >Reset</button>&nbsp;\r\n                        <button onClick={this.onFormClick.bind(this)} className=\"input-btn\" disabled={this.state.pending} btn=\"export-csv\">Export CSV</button>\r\n                    </div>\r\n                </form>\r\n                <div>{this.state.message}</div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport ReactModal from \"react-modal\"\r\nimport { Ajax } from \"../Ajax\";\r\n\r\nexport class MailModal extends React.Component{\r\n\r\n\tconstructor(props){\r\n        super(props);\r\n\r\n        // input refs\r\n        this.textRef = React.createRef();\r\n        this.errorRef = React.createRef();\r\n        this.headerRef = React.createRef();\r\n\r\n        this.type = null;\r\n        this.typeError = true;\r\n        this.errorTime = false;\r\n        this.errorMsg = \"\";\r\n\r\n        this.state = { \r\n\t\t\tother: false,\r\n\t\t\terrMessage:null,\r\n\t\t\tsuccessMessage:null\r\n        };\r\n\r\n        //Modal.setAppElement(this.props.app);\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps){\r\n\t\t// clear messages when the visibility changes\r\n\t\tif(prevProps.showModal && !this.props.showModal){\r\n\t\t\tthis.setState({errMessage: null, successMessage: null});\r\n\t\t}\r\n\t}\r\n\r\n\t// on click of submit button \r\n\tsubmitClick(e){\r\n\t\tthis.setState({errMessage:null});\r\n\t\te.preventDefault();\r\n\t\tlet goodHeader = this.headerRef.current ? (this.headerRef.current.value.length > 0) : true;\r\n\t\tif(this.type != null && this.textRef.current.value != \"\" && goodHeader){\r\n\t\t\tlet message = this.BuildArray();\r\n\r\n\t\t\t// localhost = dev, else = prod\r\n\t\t\tlet origin = window.location.origin.includes(\"localhost\") ? \"http://localhost:8080\" : window.location.origin;\r\n\r\n\t\t\tAjax.post(`${origin}/mail`,null,{message})\r\n\t\t\t\t.then(xhr => {    \r\n                    // ajax resolved (could be bad/good request, but server responded)\r\n                    if(xhr.status === 200){\r\n                        // good request - attempt to parse results json\r\n                        try{\r\n\t\t\t\t\t\t\tthis.setState({successMessage:\"Submit Successful\"});\r\n                        }\r\n                        catch(err){\r\n\t\t\t\t\t\t\t// json parse error (should never happen)\r\n\t\t\t\t\t\t\tthis.setState({errMessage:JSON.parse(err)});\r\n\t\t\t\t\t\t\t// server responded with bad request signal\r\n                        }\r\n                    }\r\n                    else{\r\n\t\t\t\t\t\t// bad request\r\n\t\t\t\t\t\tthis.setState({errMessage:\"Bad Request Error\"});\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    // ajax request died (really bad NOT a 400 error!)\r\n\t\t\t\t\tthis.setState({errMessage:\"Cannot reach server\"});// request died signal\r\n                });\r\n\t\t}\r\n\t}\r\n\t\r\n\t//Build the JSON array that is sent over the Ajax request\r\n\tBuildArray(){\r\n\t\t//get the text in the the message textarea\r\n\t\tlet text = this.textRef.current.value;\r\n\t\t//\r\n        let type = \"\";\r\n\r\n        if(this.state.other){\r\n        \ttype = this.headerRef.current.value;\r\n        }else{\r\n        \ttype = this.type;\r\n        }\r\n\r\n        // MUST match API expectations! \r\n        return {type,text};\r\n    }\r\n\r\n\t// on change of radio button set type\r\n\tonTypeSelect(type){\r\n\t\t//get the type of the radio button selected\r\n\t \tthis.type = type;\r\n\r\n\t\t// check to see if other is selected\r\n\t\tthis.setState({other: this.type === \"other\"});\r\n\r\n\t \tthis.typeError = false;\r\n\t }\r\n\r\n\t //Check if other is selcted and load elements based on that\r\n \t TypeOther(){\r\n\t \tif(!this.state.other){\r\n\t\t\t // remove element of screen\r\n\t \t\treturn null;\r\n\t \t}else{\r\n\t\t\t //load element onto screen\r\n\t \t\treturn(\r\n\t \t\t\t<div>\r\n\t \t\t\t\t<label>Other: </label> <input type=\"text\" placeholder=\"Input for other\" ref={this.headerRef} required/>\r\n\t \t\t\t</div>\r\n\t \t\t);\r\n\t \t}\r\n\t }\r\n\t \r\n\trender(){\r\n\t\treturn this.props.showModal ? (\r\n\t\t\t<form>\r\n\t\t\t\t<ReactModal isOpen={this.props.showModal} >\r\n\t\t\t\t\t<div className=\"col-lg-1\">\r\n\t\t\t  \t\t\t<span className=\"nav-link\" onClick={this.props.closeModal}>&times;</span>\r\n\t\t\t  \t\t</div>\r\n\t\t\t  \t\t<div className=\"container border\">\r\n\t\t\t\t\t  <form onSubmit={this.submitClick.bind(this)}>\r\n\t\t\t\t\t\t\t<div className=\"col-lg-12 header center\">\r\n\t\t\t\t\t\t\t\t<h2 className=\"modalHeader\">Contact Us</h2>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<span className=\"error\">\r\n\t\t\t\t\t\t\t\t\t\t{this.state.errMessage}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"success\">\r\n\t\t\t\t\t\t\t\t\t\t{this.state.successMessage}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-lg-12 center\">\r\n\t\t\t\t\t\t\t\t<input type=\"radio\" onChange={() => this.onTypeSelect(\"Bug Report\")} name=\"types\" value=\"problem\" required/>Have a problem?\r\n\t\t\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t\t\t<input type=\"radio\" onChange={() => this.onTypeSelect(\"Feature Request\")} name=\"types\" value=\"idea\" required/>Have an idea?\r\n\t\t\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t\t\t<input type=\"radio\" onChange={() => this.onTypeSelect(\"other\")} name=\"types\" value=\"other\" required/>Other\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-lg-12 center\">\r\n\t\t\t\t\t\t\t\t{this.TypeOther()}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-lg-12 center\">\r\n\t\t\t\t\t\t\t\t<textarea rows=\"4\" cols=\"100\" placeholder=\"Type message in here.\" ref={this.textRef} required></textarea>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-lg-12 center\">\r\n\t\t\t\t\t\t\t\t<input type=\"submit\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n      \t\t\t</ReactModal>\r\n\t\t\t</form>\r\n\t\t) : null;\r\n\t}\r\n}","import React from \"react\";\r\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem, Navbar as RNavbar, NavItem, Collapse, NavbarToggler, Nav } from \"reactstrap\";\r\nimport { MailModal } from \"./MailModal\"\r\nimport Simulator from \"../Simulator\";\r\n\r\nexport class Navbar extends React.Component{\r\n\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t    this.state = {\r\n\t\t\tshowNav: false,\t\t\t// navbar collapse\r\n\t\t\tshowModal: false,\t\t// mail modal visibility\r\n\t\t\tshowAdvanced: false\t\t// advanced dropdown menu visibility\r\n\t    };\r\n\r\n\t}\r\n\r\n\t// close the mail modal\r\n\tcloseModal(){\r\n\t\tthis.setState({showModal: false});\r\n\t}\r\n\r\n\t// show the mail modal\r\n\topenModal(){\r\n\t\tthis.setState({showModal: true});\r\n\t}\r\n\r\n\t// toggles the navbar collapse state\r\n\ttoggleNavbar(){\r\n\t\tthis.setState(prev => ({showNav: !prev.showNav}));\r\n\t}\r\n\r\n\t// toggle advanced dropdown\r\n\ttoggleDropdown(){\r\n\t\tthis.setState(prev => ({showAdvanced: !prev.showAdvanced}));\r\n\t}\r\n\r\n\t// advanced dropdown error correction option toggle\r\n\ttoggleErrorCorrection(){\r\n\t\tSimulator.isErrCorrecting = !Simulator.isErrCorrecting;\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<RNavbar color=\"light\" expand=\"md\">\r\n\t\t\t\t\t<NavbarToggler onClick={this.toggleNavbar.bind(this)}/>\r\n\t\t\t\t\t<Collapse isOpen={this.state.showNav} navbar>\r\n\t\t\t\t\t\t<Nav navbar>\r\n\t\t\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t\t\t<span className=\"nav-link\" onClick={this.openModal.bind(this)}>Contact Us <span className=\"sr-only\">(current)</span></span>\r\n\t\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t\t\t<Dropdown isOpen={this.state.showAdvanced} toggle={this.toggleDropdown.bind(this)}>\r\n\t\t\t\t\t\t\t\t\t\t<DropdownToggle caret color=\"light\">\r\n\t\t\t\t\t\t\t\t\t\t\tAdvanced\r\n\t\t\t\t\t\t\t\t\t\t</DropdownToggle>\r\n\t\t\t\t\t\t\t\t\t\t<DropdownMenu>\r\n\t\t\t\t\t\t\t\t\t\t\t<DropdownItem onClick={this.toggleErrorCorrection.bind(this)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\tToggle Error Correction (Currently {Simulator.isErrCorrecting ? \"Enabled\" : \"Disabled\"})\r\n\t\t\t\t\t\t\t\t\t\t\t</DropdownItem>\r\n\t\t\t\t\t\t\t\t\t\t</DropdownMenu>\r\n\t\t\t\t\t\t\t\t\t</Dropdown>\r\n\t\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t</Nav>\r\n\t\t\t\t\t</Collapse>\r\n\t\t\t\t</RNavbar>\r\n\t\t\t\t<MailModal showModal={this.state.showModal} closeModal={this.closeModal.bind(this)} />\r\n\t      \t</div>\r\n\t\t);\r\n\t}\r\n}","import React from \"react\";\r\nimport Simulator from \"../Simulator\";\r\n\r\nexport class Chart extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tdata: null,\t\t// simulatoion data set\r\n\t\t\tday: 0\t\t\t// current simulation day\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\t// simulator singles data set loaded\r\n\t\tSimulator.on(\"data\", this.onSimulatorData.bind(this));\r\n\r\n\t\t// simulator signals a reset\r\n\t\tSimulator.on(\"reset\", this.onSimulatorReset.bind(this));\r\n\r\n\t\t// simulator signals a different day\r\n\t\tSimulator.on(\"update\", this.onSimulatorUpdate.bind(this));\r\n\t}\r\n\r\n\t// simulator got data - store it\r\n\tonSimulatorData(){\r\n\t\tthis.setState({data: Simulator.data});\r\n\t}\r\n\r\n\t// simulator reset - reset this component\r\n\tonSimulatorReset(){\r\n\t\tthis.setState({data: null, day: 0});\r\n\t}\r\n\r\n\t// simulator day changed - update component day\r\n\tonSimulatorUpdate(){\r\n\t\tthis.setState({day: Simulator.currentDay});\r\n\t}\r\n\r\n\t// renders table rows up to the current simulation day\r\n\trenderRows(){\r\n\t\tif(Simulator.hasData){\r\n\t\t\tlet rows = new Array(Simulator.currentDay + 1);\r\n\r\n\t\t\tfor(let i = 0; i <= Simulator.currentDay; i++){\r\n\t\t\t\t// get json for the say\r\n\t\t\t\tlet day = Simulator.data[i];\r\n\r\n\t\t\t\t// extract data\r\n\t\t\t\tlet susceptible = Math.round(day.Susceptible),\r\n\t\t\t\t\tinfected = Math.round(day.Infected),\r\n\t\t\t\t\timmune = Math.round(day.Immune),\r\n\t\t\t\t\tdead = Math.round(day.Dead),\r\n\t\t\t\t\tpopulation = Math.round(day.TotalPopulation);\r\n\r\n\t\t\t\t// first invalid day?\r\n\t\t\t\tlet style = null, tooltip = null;\r\n\r\n\t\t\t\tif(Simulator.firstInvalidDay > -1){\r\n\t\t\t\t\tif(i === Simulator.firstInvalidDay){\r\n\t\t\t\t\t\t// this row is first invalid day\r\n\t\t\t\t\t\tstyle = {\r\n\t\t\t\t\t\t\tborderLeft: \"5px solid red\",\r\n\t\t\t\t\t\t\tborderRight: \"5px solid red\"\r\n\t\t\t\t\t\t};\r\n\t\r\n\t\t\t\t\t\ttooltip = `Data correction begins at day ${i}.`;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(i > Simulator.firstInvalidDay){\r\n\t\t\t\t\t\t// subsequent invalid days\r\n\t\t\t\t\t\tstyle = {\r\n\t\t\t\t\t\t\tborderLeft: \"1px solid red\",\r\n\t\t\t\t\t\t\tborderRight: \"1px solid red\"\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\trows[i] = (\r\n\t\t\t\t\t<tr key={i} style={style} title={tooltip}>\r\n\t\t\t\t\t\t<td onClick={()=>Simulator.setGraphDay(i)}>{i}</td>\r\n\t\t\t\t\t\t<td>{susceptible}</td>\r\n\t\t\t\t\t\t<td>{infected}</td>\r\n\t\t\t\t\t\t<td>{immune}</td>\r\n\t\t\t\t\t\t<td>{dead}</td>\r\n\t\t\t\t\t\t<td>{population}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\treturn rows;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn this.state.data !== null ? (\r\n\t\t\t<div>\r\n\t\t\t\t<table className=\"table table-striped overflow-table\">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Day</th>\r\n\t\t\t\t\t\t\t<th>Susceptible</th>\r\n\t\t\t\t\t\t\t<th>Infected</th>\r\n\t\t\t\t\t\t\t<th>Immune</th>\r\n\t\t\t\t\t\t\t<th>Dead</th>\r\n\t\t\t\t\t\t\t<th>Total Population</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{this.renderRows()}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t* {Simulator.isErrCorrecting ? \"Error correction is enabled\" : null} *\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t) : null;\r\n\t}\r\n}","import React from \"react\";\r\nimport Simulator from \"../Simulator\";\r\nimport { LineChart } from \"react-easy-chart\"\r\n\r\nexport class Graph extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\t\r\n\t    this.state = {\r\n\t\t\tdata: \t\t\tnull,\t\t\t// graph data\r\n\t\t\tday: \t\t\t0,\t\t\t\t// current simulation day\r\n\t\t\tyLabel: \t\t\"Infected\",\t\t// y-axis value\r\n\t\t\ttooltip:\t\tnull\r\n\t    };\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\t// when the simulator signals it has received data\r\n\t\tSimulator.on(\"data\", this.onSimulatorData.bind(this));\r\n\r\n\t\t// when the simulator signals a reset\r\n\t\tSimulator.on(\"reset\", this.onSimulatorReset.bind(this));\r\n\r\n\t\t// when the simulator changes the day\r\n\t\tSimulator.on(\"update\", this.onSimulatorUpdate.bind(this));\r\n\r\n\t\t// when the simulator changes the graph\r\n\t\tSimulator.on(\"update-graph\", this.onSimulatorUpdateGraph.bind(this));\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState){\r\n\t\tif(prevState.yLabel !== this.state.yLabel){\r\n\t\t\tthis.setState({tooltip: null});\r\n\t\t}\r\n\t}\r\n\r\n\t// simulator has data - convert to d3 format and store it\r\n\tonSimulatorData(){\r\n\t\t// update\r\n\t\tthis.setState({data: Simulator.data});\r\n\t}\r\n\r\n\t// simulator reset - reset this component\r\n\tonSimulatorReset(){\r\n\t\tthis.setState({data: null, day: 0});\r\n\t}\r\n\r\n\t// simulator update - update to the current day\r\n\tonSimulatorUpdate(){\r\n\t\tthis.setState({day: Simulator.currentDay});\r\n\t}\r\n\r\n\t// simulator update - graph change\r\n\tonSimulatorUpdateGraph(evt){\r\n\t\t// day change\r\n\t\tif(typeof evt.day === \"number\"){\r\n\t\t\tthis.setState({day: evt.day});\r\n\t\t}\r\n\t}\r\n\r\n\t// when the graph y axis drop down is changed\r\n\tonYLabelChange(evt){\r\n\t\tthis.setState({yLabel: evt.target.value})\r\n\t}\r\n\r\n\t// gets the data values (multiple lines) up to do the current\r\n\tgetDataForAllLabels(){\r\n\t\tlet values = [];\t\t// holds the correctly formatted values\r\n\t\tlet valuesObj = {};\t\t// helps to sort by label ('Infected', 'Susceptible', etc)\r\n\r\n\t\t// iterate over each day...\r\n\t\tfor(let i = 0; i <= this.state.day; i++){\r\n\t\t\t// day json, example: {'Infected': 100, 'Susceptible': 5, etc}\r\n\t\t\tlet row = this.state.data[i]; \r\n\r\n\t\t\t// for each label... (row[label] is the y value for the y label (ex: how many infected))\r\n\t\t\tfor(let label in row){\r\n\t\t\t\tif(label === \"TotalPopulation\") continue;\r\n\r\n\t\t\t\tlet y = parseFloat(row[label]);\r\n\r\n\t\t\t\tlet pt = {x: i, y};\r\n\r\n\t\t\t\tif(label in valuesObj){\r\n\t\t\t\t\tvaluesObj[label].push(pt);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tvaluesObj[label] = [pt];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// labels IN ORDER\r\n\t\tlet labels = [];\r\n\r\n\t\t// convert the dictionary into the correctly formatted array\r\n\t\tfor(let key in valuesObj){\r\n\t\t\tvalues.push(valuesObj[key]);\r\n\t\t\tlabels.push(key);\r\n\t\t}\r\n\r\n\t\t// allData is used by render method to determine multiline\r\n\t\treturn {values, labels, largestY: this.state.data[0].TotalPopulation};\r\n\t}\r\n\r\n\t// gets the data values up to the current day (single line)\r\n\tgetData(){\r\n\t\t// make sure there is data\r\n\t\tif(!this.state.data || this.state.day < 1){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t// All = multiline, this function is for one line\r\n\t\tif(this.state.yLabel === \"All\"){\r\n\t\t\treturn this.getDataForAllLabels();\r\n\t\t}\r\n\r\n\t\tlet largestY = 0;\r\n\r\n\t\tlet values = [];\r\n\r\n\t\t// iterate... find largest Y and populate values with {x, y} format\r\n\t\tfor(let i = 0; i <= this.state.day; i++){\r\n\t\t\tlet y = parseFloat(this.state.data[i][this.state.yLabel]);\r\n\r\n\t\t\tlargestY = Math.max(largestY, y);\r\n\r\n\t\t\tvalues.push({x: i, y});\r\n\t\t}\r\n\r\n\t\treturn {values: [values], label: this.state.yLabel, largestY};\r\n\t}\r\n\r\n\tonGraphClick(data, evt){\r\n\t\tif(this.state.yLabel !== \"All\"){\r\n\t\t\tlet {x, y} = data;\r\n\r\n\t\t\tthis.setState({tooltip: `${Math.round(y)} people ${this.state.yLabel.toLowerCase()} on day ${x}.`});\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\t// graph size constants\r\n\t\tconst WIDTH = \t\t540,\r\n\t\t\tHEIGHT = \t\t475,\r\n\t\t\tMARGIN_TOP = \t10,\r\n\t\t\tMARGIN_BOTTOM =\t50,\r\n\t\t\tMARGIN_LEFT = \t80,\r\n\t\t\tMARGIN_RIGHT = \t10;\r\n\r\n\t\t// graph line colors\r\n\t\tconst COLORS = {\r\n\t\t\t\"Infected\": \t\"green\",\r\n\t\t\t\"Susceptible\": \t\"red\",\r\n\t\t\t\"Immune\": \t\t\"steelblue\",\r\n\t\t\t\"Dead\": \t\t\"gray\"\r\n\t\t};\r\n\r\n\t\tlet data = this.getData();\r\n\t\tif(data){\r\n\t\t\tlet numDays = data.values[0].length - 1; // day zero = initial params\r\n\t\t\t\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h5>Simulated {this.state.yLabel}</h5>\r\n\t\t\t\t\t<div className=\"GraphDropdown\" onChange={this.onYLabelChange.bind(this)}>\r\n\t\t\t\t\t\t<select className=\"form-control\">\r\n\t\t\t\t\t\t\t<option>Infected</option>\r\n\t\t\t\t\t\t\t<option>Susceptible</option>\r\n\t\t\t\t\t\t\t<option>Immune</option>\r\n\t\t\t\t\t\t\t<option>Dead</option>\r\n\t\t\t\t\t\t\t<option>All</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<LineChart\r\n\t\t\t\t\t\t\tdata={data.values}\r\n\t\t\t\t\t\t\twidth={WIDTH}\r\n\t\t\t\t\t\t\theight={HEIGHT}\r\n\t\t\t\t\t\t\tmargin={{\r\n\t\t\t\t\t\t\t\ttop: MARGIN_TOP, bottom: MARGIN_BOTTOM,\r\n\t\t\t\t\t\t\t\tleft: MARGIN_LEFT, right: MARGIN_RIGHT\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\taxes\r\n\t\t\t\t\t\t\taxisLabels={{x: \"Days Elapsed\", y: (this.state.yLabel === \"All\" ? \"People\" : `People ${this.state.yLabel}`)}}\r\n\t\t\t\t\t\t\tinterpolate={\"cardinal\"}\r\n\t\t\t\t\t\t\tdataPoints={numDays < 50 && this.state.yLabel !== \"All\"}\r\n\t\t\t\t\t\t\txDomainRange={[0, numDays]}\r\n\t\t\t\t\t\t\tyDomainRange={[0, data.largestY]}\r\n\t\t\t\t\t\t\tlineColors={data.values.length !== 1 ? data.labels.map(label => COLORS[label]) : [COLORS[data.label]]}\r\n\t\t\t\t\t\t\tclickHandler={this.onGraphClick.bind(this)}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\".label\": {fill: \"black\"},\r\n\t\t\t\t\t\t\t\t\".axis\": {fontSize: \"0.75em\", fontFamily: \"arial\"}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t{this.state.tooltip}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}","import \"../lib/bootstrap.min.css\";\r\nimport \"./App.css\";\r\nimport React from \"react\";\r\nimport { Inputs } from \"./Inputs\";\r\nimport { Navbar } from \"./Navbar\";\r\nimport { Chart } from \"./Chart\";\r\nimport { Graph } from \"./Graph\";\r\n\r\nexport class App extends React.Component{\r\n    render(){\r\n        return (\r\n            <div>\r\n                <Navbar/>\r\n                <br/>\r\n                <span className=\"Version\">V0.2</span>\r\n                <main className=\"container card card-body bg-light\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-lg-6\">\r\n                            <Inputs/>\r\n                        </div>\r\n                        <div className=\"col-lg-6 graph\">\r\n                            <Graph/>\r\n                        </div>\r\n                    </div>\r\n                    <br/>\r\n                    <div>\r\n                        <Chart/>\r\n                    </div>\r\n                </main>\r\n                <footer className=\"container text-center\">\r\n                    <hr/>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-lg-6\">\r\n                            Juall | Rosenblum | Pojero | Erry \r\n                        </div>\r\n                        <div className=\"col-lg-6\">\r\n                            <a href=\"https://opensource.org/licenses/MIT\" target=\"_blank\">MIT License</a>\r\n                        </div>\r\n                    </div>\r\n                </footer>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { App } from \"./components/App\";\r\n\r\nReactDOM.render(<App/>, document.querySelector(\"#root\"));"],"sourceRoot":""}