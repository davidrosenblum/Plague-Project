(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports=a(60)},34:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(17),l=a.n(i),s=a(1),o=a(2),c=a(5),u=a(4),h=a(6),m=(a(34),a(36),function(){function e(){Object(s.a)(this,e)}return Object(o.a)(e,null,[{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(a,n){var r="string"===typeof t.method?t.method:"GET",i="string"===typeof t.url?t.url:window.location.origin,l="object"===typeof t.headers&&t.headers?t.headers:{},s="object"===typeof t.query&&t.query?t.query:{},o="undefined"!==typeof t.data?t.data:null,c=new XMLHttpRequest;for(var u in c.onload=function(){return a(c)},c.onerror=function(e){return n(e)},s&&(i+=e.queryString(s)),c.open(r,i),l)c.setRequestHeader(u,l[u]);o?"string"!==typeof o?c.send(JSON.stringify(o)):c.send(o):c.send()})}},{key:"get",value:function(t,a,n){return e.request({method:"GET",url:t,headers:a,query:n})}},{key:"post",value:function(t,a,n){return e.request({method:"POST",url:t,headers:a,data:n})}},{key:"queryString",value:function(e){var t="?";for(var a in e)t+="".concat(a,"=").concat(e[a],"&");return t.substring(0,t.length-1)}}]),e}()),d=function(){function e(){Object(s.a)(this,e),this._listeners={}}return Object(o.a)(e,[{key:"emit",value:function(e){this.willTrigger(e.type)&&this._listeners[e.type].forEach(function(t){return t(e)})}},{key:"on",value:function(e,t){this.willTrigger(e)?this._listeners[e].push(t):this._listeners[e]=[t]}},{key:"off",value:function(e,t){if(this.willTrigger(e))for(var a=this._listeners[e],n=0;n<a.length;n++)if(a[n]===t)return a.splice(n,1),!0;return!1}},{key:"willTrigger",value:function(e){return e in this._listeners}}]),e}(),p=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(s.a)(this,e),this._type=t,this._day=a}return Object(o.a)(e,[{key:"type",get:function(){return this._type}},{key:"day",get:function(){return this._day}}]),e}(),f=new(function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).data=null,e._currentDay=0,e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"load",value:function(e){var t=this;return new Promise(function(a,n){var r=window.location.href.includes("localhost")?"http://localhost:8080/plague":"".concat(window.location.origin,"/plague"),i={"Access-Control-Allow-Origin":window.location.origin};m.get(r,i,e).then(function(e){if(200===e.status){try{t.data=JSON.parse(e.response)}catch(r){n(r),t.emit(new Event("error"))}a(),t.emit(new Event("load")),t.emit(new Event("data"))}else n(new Error(e.response||"Bad request")),t.emit(new Event("error"))}).catch(function(e){n(e),t.emit(new Event("error"))})})}},{key:"downloadCSV",value:function(e){var t=window.location.href.includes("localhost")?"http://localhost:8080/plague/csv":"".concat(window.location.origin,"/plague/csv");return m.get(t,null,e)}},{key:"createCSVDownloadURL",value:function(e){var t=m.queryString(e);return window.location.href.includes("localhost")?"http://localhost:8080/plague/csv".concat(t):"".concat(window.location.origin,"/plague/csv").concat(t)}},{key:"autoRun",value:function(){this.currentDay=this.data.length-1}},{key:"nextDay",value:function(){this.currentDay<this.data.length&&this.currentDay++}},{key:"reset",value:function(){this.data=null,this.currentDay=0,this.emit(new Event("reset"))}},{key:"setGraphDay",value:function(e){this.emit(new p("update-graph",e))}},{key:"currentDay",set:function(e){this._currentDay=e,this.emit(new p("update",this.currentDay))},get:function(){return this._currentDay}},{key:"hasData",get:function(){return null!==this.data}}]),t}(d)),v=(a(38),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).numRef=r.a.createRef(),a.rangeRef=r.a.createRef(),a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.numRef.current.value=this.props.init||this.props.min,this.rangeRef.current.value=this.props.init||this.props.min}},{key:"onNumber",value:function(e){var t=e.target.value;t.length?(t=Math.min(Math.max(t,this.props.min),this.props.max),this.numRef.current.value=t,this.rangeRef.current.value=t):this.rangeRef.current.value=this.props.min}},{key:"onSlide",value:function(e){var t=e.target.value;t=Math.min(Math.max(t,this.props.min),this.props.max),this.numRef.current.value=t}},{key:"render",value:function(){return r.a.createElement("div",{className:"num-slider-container"},r.a.createElement("div",null,r.a.createElement("label",null,this.props.label),this.props.showRange?" ".concat(this.minText,"-").concat(this.maxText):null),r.a.createElement("div",null,r.a.createElement("input",{ref:this.numRef,onChange:this.onNumber.bind(this),type:"number",min:this.props.min,max:this.props.max,step:this.props.step,placeholder:this.props.placeholder,required:this.props.required})),r.a.createElement("div",null,r.a.createElement("input",{ref:this.rangeRef,onChange:this.onSlide.bind(this),type:"range",min:this.props.min,max:this.props.max,step:this.props.step,className:"num-slider-slider"})))}},{key:"minText",get:function(){return this.props.minText?this.props.minText:this.props.min}},{key:"maxText",get:function(){return this.props.maxText?this.props.maxText:this.props.max}},{key:"value",get:function(){return this.numRef.current.value}}]),t}(r.a.Component)),y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).intialImmunityRef=r.a.createRef(),a.virilityRef=r.a.createRef(),a.fatalityRef=r.a.createRef(),a.initialInfectedRef=r.a.createRef(),a.intialPopRef=r.a.createRef(),a.infectionLengthRef=r.a.createRef(),a.daysRef=r.a.createRef(),a.state={pending:!1,message:null,lastBtn:null},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){f.on("load",this.onSimulatorLoad.bind(this)),f.on("error",this.onSimulatorError.bind(this))}},{key:"getInputsDictionary",value:function(){var e=this.intialImmunityRef.current.value,t=this.virilityRef.current.value,a=this.fatalityRef.current.value,n=this.initialInfectedRef.current.value,r=this.intialPopRef.current.value,i=this.infectionLengthRef.current.value,l=this.daysRef.current.value;return{immune_percent:e,virility:t,fatal_percent:a,initial_infected:n=Math.min(n,r),initial_population:r,infection_length:i,simulation_length:l}}},{key:"onSimulatorError",value:function(){this.setState({pending:!1})}},{key:"onSimulatorLoad",value:function(){this.setState({pending:!1})}},{key:"onReset",value:function(){f.reset()}},{key:"dayByDay",value:function(){var e=this;f.hasData?f.nextDay():(this.setState({pending:!0}),f.load(this.getInputsDictionary()).then(function(){e.setState({message:null}),f.nextDay()}).catch(function(t){return e.setState({message:t.message})}))}},{key:"autoRun",value:function(){var e=this;f.hasData?f.autoRun():(this.setState({pending:!0}),f.load(this.getInputsDictionary()).then(function(){e.setState({message:null}),f.autoRun()}).catch(function(t){return e.setState({message:t.message})}))}},{key:"downloadCSV",value:function(){if(!this.state.pending){var e=f.createCSVDownloadURL(this.getInputsDictionary()),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("target","_blank"),t.setAttribute("download","download"),t.click(),t=null}}},{key:"onSubmit",value:function(e){e.preventDefault(),"day-by-day"===this.state.lastBtn?this.dayByDay():"auto-run"===this.state.lastBtn?this.autoRun():"export-csv"===this.state.lastBtn&&this.downloadCSV()}},{key:"onFormClick",value:function(e){this.setState({lastBtn:e.target.getAttribute("btn")})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h5",{className:"text-center"},"Experimental Variables"),r.a.createElement("form",{onSubmit:this.onSubmit.bind(this)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement(v,{label:"Length of Infection (Days)",showRange:!0,min:1,max:365,step:1,required:!0,ref:this.infectionLengthRef})),r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement(v,{label:"Virility",showRange:!0,min:0,max:20,step:.01,required:!0,ref:this.virilityRef}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement(v,{label:"Fatality Percent",showRange:!0,min:0,max:1,step:.001,required:!0,ref:this.fatalityRef})),r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement(v,{label:"Initial Population",showRange:!0,min:1,max:1e6,step:1,required:!0,ref:this.intialPopRef}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement(v,{label:"Initial Immunity Percent",showRange:!0,min:0,max:1,step:.01,required:!0,ref:this.intialImmunityRef})),r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement(v,{label:"Initial Infected",showRange:!0,min:0,max:1e6,maxText:"Population",step:1,required:!0,ref:this.initialInfectedRef}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement(v,{label:"Simulation Length (Days)",showRange:!0,min:1,max:365,step:1,required:!0,ref:this.daysRef})),r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement("label",null,"Presets:"),r.a.createElement("select",{className:"form-control"},r.a.createElement("option",{value:"Custom"},"Custom")))),r.a.createElement("div",{className:"form-group text-center"},r.a.createElement("button",{onClick:this.onFormClick.bind(this),className:"input-btn",disabled:this.state.pending,btn:"day-by-day"},"Day-By-Day"),"\xa0",r.a.createElement("button",{onClick:this.onFormClick.bind(this),className:"input-btn",disabled:this.state.pending,btn:"auto-run"},"Auto Run"),"\xa0",r.a.createElement("button",{onClick:this.onReset.bind(this),className:"input-btn",disabled:this.state.pending,type:"button"},"Reset"),"\xa0",r.a.createElement("button",{onClick:this.onFormClick.bind(this),className:"input-btn",disabled:this.state.pending,btn:"export-csv"},"Export CSV"))),r.a.createElement("div",null,this.state.message))}}]),t}(r.a.Component),g=a(27),b=a.n(g),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).textRef=r.a.createRef(),a.errorRef=r.a.createRef(),a.headerRef=r.a.createRef(),a.type=null,a.typeError=!0,a.errorTime=!1,a.errorMsg="",a.state={other:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"submitClick",value:function(e){if(e.preventDefault(),null!=this.type&&""!=this.textRef.current.value){console.log(this.textRef.current.value);var t=this.BuildArray();m.post("".concat(window.location.origin,"/mail"),null,{message:t}).then(function(e){if(200===e.status)try{console.log("Text Received")}catch(t){console.log(JSON.parse(t))}else console.log("Bad Request Error")}).catch(function(e){console.log("Really bad Error")})}else{var a=this.textRef.current.value;1==this.typeError&&""==a?this.errorMsg="No Header Selected|No Text Entered":1==this.typeError?this.errorMsg="No Header Selected":""==a&&(this.errorMsg="No Text Entered"),""!=this.errorMsg&&(this.errorTime=!0),console.log("Error Time: "+this.errorTime),this.buildError()}}},{key:"BuildArray",value:function(){var e=this.textRef.current.value;return{type:this.state.other?this.headerRef.current.value:this.type,text:e}}},{key:"onTypeSelect",value:function(e){this.type=e,"other"==this.type?this.setState({other:!0}):this.setState({other:!1}),this.typeError=!1}},{key:"TypeOther",value:function(){return this.state.other?r.a.createElement("div",null,r.a.createElement("label",null,"Other: ")," ",r.a.createElement("input",{type:"text",placeholder:"Input for other",ref:this.headerRef})):null}},{key:"buildError",value:function(){return console.log("Error Message: "+this.errorMsg),this.errorTime?r.a.createElement("span",{className:"error"},this.errorMsg):(this.errorMsg="",null)}},{key:"render",value:function(){var e=this;return r.a.createElement("form",null,r.a.createElement(b.a,{isOpen:this.props.showModal},r.a.createElement("div",{className:"col-lg-1"},r.a.createElement("span",{className:"nav-link",onClick:this.props.closeModal},"\xd7")),r.a.createElement("div",{className:"container border"},r.a.createElement("form",{onSubmit:this.submitClick.bind(this)},r.a.createElement("div",{className:"col-lg-12 header center"},r.a.createElement("h2",{className:"modalHeader"},"Contact Us"),r.a.createElement("div",null,this.buildError())),r.a.createElement("div",{className:"col-lg-12 center"},r.a.createElement("input",{type:"radio",onChange:function(t){return e.onTypeSelect("Bug Report")},name:"types",value:"problem"}),"Have a problem? \xa0",r.a.createElement("input",{type:"radio",onChange:function(t){return e.onTypeSelect("Feature Request")},name:"types",value:"idea"}),"Have an idea? \xa0",r.a.createElement("input",{type:"radio",onChange:function(t){return e.onTypeSelect("other")},name:"types",value:"other"}),"Other"),r.a.createElement("div",{className:"col-lg-12 center"},this.TypeOther()),r.a.createElement("div",{className:"col-lg-12 center"},r.a.createElement("textarea",{rows:"4",cols:"100",placeholder:"Type message in here.",ref:this.textRef})),r.a.createElement("div",{className:"col-lg-12 center"},r.a.createElement("input",{type:"submit"}))))))}}]),t}(r.a.Component),R=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={showModal:!1,closeModal:!1},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"closeModal",value:function(){this.setState({showModal:!1})}},{key:"openModal",value:function(){this.setState({showModal:!0})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement("span",{className:"nav-link",onClick:this.openModal.bind(this)},"Contact Us ",r.a.createElement("span",{className:"sr-only"},"(current)")))))),r.a.createElement(E,{showModal:this.state.showModal,closeModal:this.closeModal.bind(this)}))}}]),t}(r.a.Component),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={data:null,day:0},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){f.on("data",this.onSimulatorData.bind(this)),f.on("reset",this.onSimulatorReset.bind(this)),f.on("update",this.onSimulatorUpdate.bind(this))}},{key:"onSimulatorData",value:function(){this.setState({data:f.data})}},{key:"onSimulatorReset",value:function(){this.setState({data:null,day:0})}},{key:"onSimulatorUpdate",value:function(){this.setState({day:f.currentDay})}},{key:"renderRows",value:function(){if(f.hasData){for(var e=new Array(f.currentDay+1),t=function(t){var a=f.data[t],n=Math.round(a.Susceptible),i=Math.round(a.Infected),l=Math.round(a.Immune),s=Math.round(a.Dead),o=Math.round(a.TotalPopulation);e[t]=r.a.createElement("tr",{key:t},r.a.createElement("td",{onClick:function(){return f.setGraphDay(t)}},t),r.a.createElement("td",null,n),r.a.createElement("td",null,i),r.a.createElement("td",null,l),r.a.createElement("td",null,s),r.a.createElement("td",null,o))},a=0;a<=f.currentDay;a++)t(a);return e}return null}},{key:"render",value:function(){return null!==this.state.data?r.a.createElement("div",null,r.a.createElement("table",{className:"table table-striped overflow-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Day"),r.a.createElement("th",null,"Susceptible"),r.a.createElement("th",null,"Infected"),r.a.createElement("th",null,"Immune"),r.a.createElement("th",null,"Dead"),r.a.createElement("th",null,"Total Population"))),r.a.createElement("tbody",null,this.renderRows()))):null}}]),t}(r.a.Component),w=a(28),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).label="infected",a.state={data:null,day:0},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){f.on("data",this.onSimulatorData.bind(this)),f.on("reset",this.onSimulatorReset.bind(this)),f.on("update",this.onSimulatorUpdate.bind(this)),f.on("update-graph",this.onSimulatorUpdateGraph.bind(this))}},{key:"onSimulatorData",value:function(){var e=f.data.map(function(e,t){return{x:t,y:e.Infected}});this.setState({data:e})}},{key:"onSimulatorReset",value:function(){this.setState({data:null,day:0})}},{key:"onSimulatorUpdate",value:function(){this.setState({day:f.currentDay})}},{key:"onSimulatorUpdateGraph",value:function(e){"day"in e&&this.setState({day:e.day})}},{key:"getData",value:function(){return!this.state.data||this.state.day<1?null:{values:this.state.data.slice(0,this.state.day+1)}}},{key:"render",value:function(){return null!==this.state.data?r.a.createElement("div",null,r.a.createElement("h5",null),r.a.createElement("div",{className:"GraphDropdown"},r.a.createElement("select",null,r.a.createElement("option",{value:"Infected"},"Infected"),r.a.createElement("option",{value:"Suscpetible"},"Susceptible"),r.a.createElement("option",{value:"Immune"},"Immune"),r.a.createElement("option",{value:"Dead"},"Dead"))),r.a.createElement("div",null,r.a.createElement(w.LineChart,{data:this.getData(),axes:!0,width:540,height:525,margin:{top:10,bottom:50,left:80,right:10},xAxis:{label:"Day"},yAxis:{label:this.label}}))):null}}]),t}(r.a.Component),x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={rows:null},a}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(R,null),r.a.createElement("br",null),r.a.createElement("main",{className:"container card card-body bg-light"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement(y,null)),r.a.createElement("div",{className:"col-lg-6 graph"},r.a.createElement(S,{rows:this.state.rows}))),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement(k,null))))}}]),t}(r.a.Component);l.a.render(r.a.createElement(x,null),document.querySelector("#root"))}},[[29,2,1]]]);
//# sourceMappingURL=main.d153f2e5.chunk.js.map