(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,n){e.exports=n(244)},112:function(e,t,n){},114:function(e,t,n){},116:function(e,t,n){},242:function(e,t,n){},244:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(20),s=n.n(i),l=n(7),o=n(8),c=n(10),u=n(9),h=n(11),m=(n(112),n(114),function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,null,[{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,a){var r="string"===typeof t.method?t.method:"GET",i="string"===typeof t.url?t.url:window.location.origin,s="object"===typeof t.headers&&t.headers?t.headers:{},l="object"===typeof t.query&&t.query?t.query:{},o="undefined"!==typeof t.data?t.data:null,c=new XMLHttpRequest;for(var u in c.onload=function(){return n(c)},c.onerror=function(e){return a(e)},l&&(i+=e.queryString(l)),c.open(r,i),s)c.setRequestHeader(u,s[u]);o?"string"!==typeof o?c.send(JSON.stringify(o)):c.send(o):c.send()})}},{key:"get",value:function(t,n,a){return e.request({method:"GET",url:t,headers:n,query:a})}},{key:"post",value:function(t,n,a){return e.request({method:"POST",url:t,headers:n,data:a})}},{key:"queryString",value:function(e){var t="?";for(var n in e)t+="".concat(n,"=").concat(e[n],"&");return t.substring(0,t.length-1)}}]),e}()),d=function(){function e(){Object(l.a)(this,e),this._listeners={}}return Object(o.a)(e,[{key:"emit",value:function(e){this.willTrigger(e.type)&&this._listeners[e.type].forEach(function(t){return t(e)})}},{key:"on",value:function(e,t){this.willTrigger(e)?this._listeners[e].push(t):this._listeners[e]=[t]}},{key:"off",value:function(e,t){if(this.willTrigger(e))for(var n=this._listeners[e],a=0;a<n.length;a++)if(n[a]===t)return n.splice(a,1),!0;return!1}},{key:"willTrigger",value:function(e){return e in this._listeners}}]),e}(),f=new(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).data=null,e._firstInvalidDay=-1,e._useErrCorrecting=!0,e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"load",value:function(e){var t=this;return new Promise(function(n,a){var r=window.location.href.includes("localhost")?"http://localhost:8080/plague":"".concat(window.location.origin,"/plague"),i={"Access-Control-Allow-Origin":window.location.origin,"Error-Correction":t.isErrCorrecting};m.get(r,i,e).then(function(e){if(200===e.status){try{t.data=JSON.parse(e.response),t._firstInvalidDay=parseInt(e.getResponseHeader("First-Invalid-Day"))||-1}catch(r){a(r),t.emit(new Event("error"))}n(),t.emit(new Event("load")),t.emit(new Event("data"))}else a(new Error(e.response||"Bad request")),t.emit(new Event("error"))}).catch(function(e){a(e),t.emit(new Event("error"))})})}},{key:"downloadCSVFile",value:function(e){var t=this;return new Promise(function(n,a){var r=window.location.origin.includes("localhost")?"http://localhost:8080":window.location.origin,i="".concat(r,"/plague"),s={"Access-Control-Allow-Origin":window.location.origin,"Content-Type":"text/csv","Error-Correction":t.isErrCorrecting};m.get(i,s,e).then(function(e){if(200===e.status){var t=new Blob([e.response],{type:"octet/stream"}),r=document.createElement("a"),i=window.URL.createObjectURL(t);r.setAttribute("download","data_".concat(Date.now(),".csv")),r.setAttribute("href",i),r.click(),window.URL.revokeObjectURL(i),n("File downloaded.")}else console.log(e.response),a(new Error("Error downloading CSV file."))}).catch(function(e){console.log(e.message),a(new Error("Unable to download CSV file."))})})}},{key:"reset",value:function(){this.data=null,this.emit(new Event("reset"))}},{key:"isErrCorrecting",set:function(e){if("boolean"!==typeof e)throw new Error("isErrCorrecting must be set to a boolean value.");this._useErrCorrecting=e},get:function(){return this._useErrCorrecting}},{key:"hasData",get:function(){return null!==this.data}},{key:"firstInvalidDay",get:function(){return this._firstInvalidDay}}]),t}(d)),p=new(function(){function e(){Object(l.a)(this,e),this._numParamSets=0,this._lastParamSet=null,this._currDay=0,window.sessionStorage.clear()}return Object(o.a)(e,[{key:"saveParamsInputsDict",value:function(e){var t=this.convertToTitleCase(e);return!!this.paramsNotLastSave(t)&&(window.sessionStorage.setItem(++this._numParamSets,JSON.stringify(t)),this._currDay=this.numParamSets,this._lastParamSet=t,this.numParamSets>100&&window.sessionStorage.removeItem(this.numParamSets-100),!0)}},{key:"saveParams",value:function(e,t,n,a,r,i,s,l){return this.saveParamsInputsDict({infection_length:e,transmission_rate:t,virulence:n,initial_population:a,immune_percent:r,initial_infected:i,simulation_length:s,preset:l})}},{key:"convertToTitleCase",value:function(e){return{infectionLength:e.infection_length,transmissionRate:e.transmission_rate,virulence:e.virulence,initialPopulation:e.initial_population,immunePercent:e.immune_percent,initialInfected:e.initial_infected,simulationLength:e.simulation_length,preset:e.preset}}},{key:"paramsNotLastSave",value:function(e){if(!this._lastParamSet)return!0;for(var t in this._lastParamSet)if(this._lastParamSet[t]!==e[t])return!0;return!1}},{key:"getSavedParams",value:function(e){var t=window.sessionStorage.getItem(e)||null;return t?JSON.parse(t):null}},{key:"stepBackwards",value:function(){this._currDay-1>=this.firstStoredDay&&(this._lastParamSet=this.getSavedParams(--this._currDay))}},{key:"stepForwards",value:function(){this._currDay+1<=this.numParamSets&&(this._lastParamSet=this.getSavedParams(++this._currDay))}},{key:"firstStoredDay",get:function(){return this.numParamSets>100?this.numParamSets-100:0}},{key:"currentParams",get:function(){return this.getSavedParams(this._currDay)}},{key:"currentDay",get:function(){return this._currDay}},{key:"numParamSets",get:function(){return this._numParamSets}}]),e}()),v=(n(116),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).numRef=r.a.createRef(),n.rangeRef=r.a.createRef(),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.numRef.current.value=this.props.init||this.props.min,this.rangeRef.current.value=this.props.init||this.props.min}},{key:"onNumber",value:function(e){var t=parseFloat(e.target.value);t?(t=Math.min(Math.max(t,this.props.min),this.props.max),this.numRef.current.value=t,this.rangeRef.current.value=t):this.rangeRef.current.value=this.props.min}},{key:"onSlide",value:function(e){var t=e.target.value;t=Math.min(Math.max(t,this.props.min),this.props.max),this.numRef.current.value=t}},{key:"render",value:function(){return r.a.createElement("div",{className:"num-slider-container"},r.a.createElement("div",null,r.a.createElement("label",null,this.props.label),this.props.showRange?" ".concat(this.minText,"-").concat(this.maxText):null),r.a.createElement("div",null,r.a.createElement("input",{ref:this.numRef,onChange:this.onNumber.bind(this),type:"number",min:this.props.min,max:this.props.max,step:this.props.step,placeholder:this.props.placeholder,required:this.props.required,disabled:this.props.disabled})),r.a.createElement("div",null,r.a.createElement("input",{ref:this.rangeRef,onChange:this.onSlide.bind(this),type:"range",min:this.props.min,max:this.props.max,step:this.props.step,disabled:this.props.disabled,className:"num-slider-slider"})))}},{key:"value",set:function(e){this.numRef.current.value=e,this.rangeRef.current.value=e},get:function(){return this.numRef.current.value}},{key:"minText",get:function(){return this.props.minText?this.props.minText:this.props.min}},{key:"maxText",get:function(){return this.props.maxText?this.props.maxText:this.props.max}}]),t}(r.a.Component)),g={"Seasonal Flu":{"Infection Length":8,Transmission:1.2,Virulence:.01},Smallpox:{"Infection Length":14,Transmission:2.5,Virulence:.25},Polio:{"Infection Length":18,Transmission:1,Virulence:.01},Measles:{"Infection Length":8,Transmission:10,Virulence:.01},Ebola:{"Infection Length":13,Transmission:1.5,Virulence:.75},"H1N1 Flu":{"Infection Length":8,Transmission:1.6,Virulence:.01},"H5N1 Flu":{"Infection Length":8,Transmission:.1,Virulence:.6},"1918 Flu":{"Infection Length":8,Transmission:2,Virulence:.03}},b=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).intialImmunityRef=r.a.createRef(),n.transmissionRef=r.a.createRef(),n.virulenceRef=r.a.createRef(),n.initialInfectedRef=r.a.createRef(),n.intialPopRef=r.a.createRef(),n.infectionLengthRef=r.a.createRef(),n.daysRef=r.a.createRef(),n.presetRef=r.a.createRef(),n.state={pending:!1,message:null,isDisabled:!1},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){f.on("load",this.onSimulatorLoad.bind(this)),f.on("error",this.onSimulatorError.bind(this)),"true"===new URLSearchParams(window.location.search).get("test")&&(this.initialInfectedRef.current.value=500,this.intialImmunityRef.current.value=.1,this.intialPopRef.current.value=1e6,this.virulenceRef.current.value=.25,this.daysRef.current.value=365,this.infectionLengthRef.current.value=100,this.transmissionRef.current.value=.2,p.saveParamsInputsDict(this.getInputsDictionary()))}},{key:"getInputsDictionary",value:function(){var e=this.intialImmunityRef.current.value,t=this.transmissionRef.current.value,n=this.virulenceRef.current.value,a=this.initialInfectedRef.current.value,r=this.intialPopRef.current.value,i=this.infectionLengthRef.current.value,s=this.daysRef.current.value,l=this.presetRef.current.value;return{immune_percent:e,transmission_rate:t,virulence:n,initial_infected:a=Math.min(a,r),initial_population:r,infection_length:i,simulation_length:s,preset:l}}},{key:"onSimulatorError",value:function(){this.setState({pending:!1})}},{key:"onSimulatorLoad",value:function(){this.setState({pending:!1})}},{key:"onReset",value:function(){f.reset()}},{key:"downloadCSV",value:function(){var e=this;this.state.pending||(this.setState({pending:!0}),f.downloadCSVFile(this.getInputsDictionary()).catch(function(t){e.setState({message:t.message})}).then(function(){e.setState({pending:!1})}))}},{key:"runSimulation",value:function(){var e=this;if(f.hasData){var t=p.convertToTitleCase(this.getInputsDictionary());p.paramsNotLastSave(t)&&(f.reset(),this.runSimulation())}else this.setState({pending:!0}),f.load(this.getInputsDictionary()).then(function(){e.setState({message:null}),p.saveParamsInputsDict(e.getInputsDictionary())}).catch(function(t){return e.setState({message:t.message})})}},{key:"onSubmit",value:function(e){e.preventDefault(),this.runSimulation()}},{key:"onPresetChange",value:function(){var e=this.presetRef.current.value;"Custom"!==e?(this.setState({isDisabled:!0}),this.infectionLengthRef.current.value=g[e]["Infection Length"],this.transmissionRef.current.value=g[e].Transmission,this.virulenceRef.current.value=g[e].Virulence):this.setState({isDisabled:!1})}},{key:"switchParamSet",value:function(e){if("backwards"===e)p.stepBackwards();else{if("forwards"!==e)throw new Error("Parameter switch direction must be 'forwards' or 'backwards'.");p.stepForwards()}var t=p.currentParams||null;t&&(this.infectionLengthRef.current.value=t.infectionLength,this.transmissionRef.current.value=t.transmissionRate,this.virulenceRef.current.value=t.virulence,this.intialPopRef.current.value=t.initialPopulation,this.intialImmunityRef.current.value=t.immunePercent,this.initialInfectedRef.current.value=t.initialInfected,this.daysRef.current.value=t.simulationLength,this.presetRef.current.value=t.preset,this.onPresetChange())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{id:"inputs-header-container",className:"text-center"},r.a.createElement("button",{onClick:function(){return e.switchParamSet("backwards")}},"\u2190"),r.a.createElement("h5",{className:"text-center"},"Experimental Variables"),r.a.createElement("button",{onClick:function(){return e.switchParamSet("forwards")}},"\u2192")),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.onSubmit.bind(this)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement(v,{label:"Length of Infection (Days)",showRange:!0,min:1,max:365,step:1,required:!0,ref:this.infectionLengthRef,disabled:this.state.isDisabled})),r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement(v,{label:"Transmission Rate",showRange:!0,min:0,max:20,step:.01,required:!0,ref:this.transmissionRef,disabled:this.state.isDisabled}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement(v,{label:"Virulence",showRange:!0,min:0,max:1,step:.001,required:!0,ref:this.virulenceRef,disabled:this.state.isDisabled})),r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement(v,{label:"Initial Population",showRange:!0,min:1,max:1e6,step:1,required:!0,ref:this.intialPopRef}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement(v,{label:"Initial Immunity Percent",showRange:!0,min:0,max:1,step:.01,required:!0,ref:this.intialImmunityRef})),r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement(v,{label:"Initial Infected",showRange:!0,min:0,max:1e6,maxText:"Population",step:1,required:!0,ref:this.initialInfectedRef}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement(v,{label:"Simulation Length (Days)",showRange:!0,min:1,max:365,step:1,required:!0,ref:this.daysRef})),r.a.createElement("div",{className:"form-group col-lg-6"},r.a.createElement("label",null,"Presets:"),r.a.createElement("select",{ref:this.presetRef,className:"form-control",onChange:this.onPresetChange.bind(this)},r.a.createElement("option",null,"Custom"),r.a.createElement("option",null,"Seasonal Flu"),r.a.createElement("option",null,"Smallpox"),r.a.createElement("option",null,"Polio"),r.a.createElement("option",null,"Measles"),r.a.createElement("option",null,"Ebola"),r.a.createElement("option",null,"H1N1 Flu"),r.a.createElement("option",null,"H5N1 Flu"),r.a.createElement("option",null,"1918 Flu")))),r.a.createElement("div",{className:"form-group text-center"},r.a.createElement("button",{className:"input-btn",disabled:this.state.pending,btn:"auto-run"},"Run"),"\xa0",r.a.createElement("button",{onClick:this.onReset.bind(this),className:"input-btn",disabled:this.state.pending,type:"button"},"Reset"),"\xa0",r.a.createElement("button",{className:"input-btn",disabled:this.state.pending},"Export CSV"))),r.a.createElement("div",null,this.state.message))}}]),t}(r.a.Component),y=n(13),E=n(104),w=n.n(E),R=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).textRef=r.a.createRef(),n.errorRef=r.a.createRef(),n.headerRef=r.a.createRef(),n.type=null,n.typeError=!0,n.errorTime=!1,n.errorMsg="",n.state={other:!1,errMessage:null,successMessage:null,disabled:!1},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){e.showModal&&!this.props.showModal&&this.setState({errMessage:null,successMessage:null})}},{key:"submitClick",value:function(e){var t=this;this.setState({errMessage:null}),e.preventDefault();var n=!this.headerRef.current||this.headerRef.current.value.length>0;if(null!=this.type&&""!=this.textRef.current.value&&n){var a=this.BuildArray(),r=window.location.origin.includes("localhost")?"http://localhost:8080":window.location.origin;this.setState({successMessage:"Sending...",errMessage:null,disabled:!0}),m.post("".concat(r,"/mail"),null,a).then(function(e){200===e.status?t.setState({successMessage:"Submit Successful",errMessage:null,disabled:!1}):t.setState({errMessage:"Bad Request Error",successMessage:null,disabled:!1}),t.headerRef.current&&(t.headerRef.current.value=""),t.textRef.current.value=""}).catch(function(e){t.setState({errMessage:"Cannot reach server",disabled:!1})})}}},{key:"BuildArray",value:function(){var e=this.textRef.current.value;return{type:this.state.other?this.headerRef.current.value:this.type,text:e}}},{key:"onTypeSelect",value:function(e){this.type=e,this.setState({other:"other"===this.type}),this.typeError=!1}},{key:"TypeOther",value:function(){return this.state.other?r.a.createElement("div",null,r.a.createElement("label",null,"Other: ")," ",r.a.createElement("input",{type:"text",placeholder:"Input for other",ref:this.headerRef,required:!0})):null}},{key:"render",value:function(){var e=this;return this.props.showModal?r.a.createElement("div",null,r.a.createElement(w.a,{isOpen:this.props.showModal},r.a.createElement("div",{className:"col-lg-1"},r.a.createElement("span",{className:"pointer",onClick:this.props.closeModal},"\xd7")),r.a.createElement("div",{className:"container border"},r.a.createElement("form",{onSubmit:this.submitClick.bind(this)},r.a.createElement("div",null,r.a.createElement("div",{className:"header center"},r.a.createElement("h2",{className:"modalHeader"},"Contact Us"),r.a.createElement("div",null,r.a.createElement("span",{className:"error"},this.state.errMessage),r.a.createElement("span",{className:"success"},this.state.successMessage))),r.a.createElement("div",{className:"form-group center"},r.a.createElement("input",{type:"radio",onChange:function(){return e.onTypeSelect("Bug Report")},name:"types",value:"problem",required:!0}),"Have a problem? \xa0",r.a.createElement("input",{type:"radio",onChange:function(){return e.onTypeSelect("Feature Request")},name:"types",value:"idea",required:!0}),"Have an idea? \xa0",r.a.createElement("input",{type:"radio",onChange:function(){return e.onTypeSelect("other")},name:"types",value:"other",required:!0}),"Other"),r.a.createElement("div",{className:"form-group center"},this.TypeOther()),r.a.createElement("div",{className:"form-group center"},r.a.createElement("textarea",{className:"modal-text-area",placeholder:"Type message in here.",ref:this.textRef,required:!0})),r.a.createElement("div",{className:"form-group center"},r.a.createElement("input",{className:"input-btn",type:"submit",disabled:this.state.disabled}))))))):null}}]),t}(r.a.Component),S=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={showNav:!1,showModal:!1,showAdvanced:!1},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"closeModal",value:function(){this.setState({showModal:!1})}},{key:"openModal",value:function(){this.setState({showModal:!0})}},{key:"toggleNavbar",value:function(){this.setState(function(e){return{showNav:!e.showNav}})}},{key:"toggleDropdown",value:function(){this.setState(function(e){return{showAdvanced:!e.showAdvanced}})}},{key:"toggleErrorCorrection",value:function(){f.isErrCorrecting=!f.isErrCorrecting}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y.i,{color:"light",light:!0,expand:"md"},r.a.createElement(y.j,{color:"dark",onClick:this.toggleNavbar.bind(this)}),r.a.createElement(y.a,{isOpen:this.state.showNav,navbar:!0},r.a.createElement(y.f,{navbar:!0},r.a.createElement(y.g,null,r.a.createElement(y.h,{className:"pointer",selected:!0,onClick:this.openModal.bind(this)},"Contact Us")),r.a.createElement(y.g,null,r.a.createElement(y.b,{isOpen:this.state.showAdvanced,toggle:this.toggleDropdown.bind(this)},r.a.createElement(y.e,{caret:!0,color:"light"},"Advanced"),r.a.createElement(y.d,null,r.a.createElement(y.c,{onClick:this.toggleErrorCorrection.bind(this)},"Toggle Error Correction (Currently ",f.isErrCorrecting?"Enabled":"Disabled",")"))))))),r.a.createElement(R,{showModal:this.state.showModal,closeModal:this.closeModal.bind(this)}))}}]),t}(r.a.Component),k=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={visible:!1},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.on("data",function(){return e.setState({visible:!0})}),f.on("reset",function(){return e.setState({visible:!1})})}},{key:"getStyleForDay",value:function(e){var t=null;return f.firstInvalidDay>-1&&(e===f.firstInvalidDay?t={borderLeft:"5px solid red",borderRight:"5px solid red"}:e>f.firstInvalidDay&&(t={borderLeft:"1px solid red",borderRight:"1px solid red"})),t}},{key:"renderRows",value:function(){var e=this,t=f.data;if(t){var n=new Array(t.length+1);return t.forEach(function(t,a){var i=Math.round(t.Susceptible),s=Math.round(t.Infected),l=Math.round(t.Immune),o=Math.round(t.Dead),c=Math.round(t.TotalPopulation),u=e.getStyleForDay(a);n[a]=r.a.createElement("tr",{key:a,style:u},r.a.createElement("td",null,a),r.a.createElement("td",null,i.toLocaleString()),r.a.createElement("td",null,s.toLocaleString()),r.a.createElement("td",null,l.toLocaleString()),r.a.createElement("td",null,o.toLocaleString()),r.a.createElement("td",null,c.toLocaleString()))}),n}return null}},{key:"render",value:function(){return this.state.visible?r.a.createElement("div",null,r.a.createElement("table",{className:"table table-striped overflow-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Day"),r.a.createElement("th",null,"Susceptible"),r.a.createElement("th",null,"Infected"),r.a.createElement("th",null,"Immune"),r.a.createElement("th",null,"Dead"),r.a.createElement("th",null,"Total Population"))),r.a.createElement("tbody",null,this.renderRows())),r.a.createElement("div",{className:"text-center"},f.firstInvalidDay>-1?"* Error correction begins on day ".concat(f.firstInvalidDay," *"):null)):null}}]),t}(r.a.Component),D=n(106),x=new(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._startDay=-1,e._endDay=Number.MAX_SAFE_INTEGER,e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"getData",value:function(e){var t=f.data,n={},a=0;if(t)for(var r=this.startDay>-1?this.startDay:0,i=this.endDay<t.length?this.endDay:t.length,s=r;s<i;s++){var l=t[s];for(var o in e)if(!0===e[o]){var c=parseFloat(l[o]),u={x:s,y:c};o in n?n[o].push(u):n[o]=[u],a=Math.max(a,c)}}var h=[];Object.keys(n).forEach(function(e){return h.push(n[e])});var m=Object.keys(e).filter(function(t){return!0===e[t]});return{values:h,largestY:a,labels:m}}},{key:"setDaysRange",value:function(e,t){this._startDay=e,this._endDay=t,this.emit(new Event("update"))}},{key:"startDay",set:function(e){this._startDay=e,this.emit(new Event("update"))},get:function(){return Math.max(0,this._startDay)}},{key:"endDay",set:function(e){this._endDay=e,this.emit(new Event("update"))},get:function(){return Math.min(this._endDay,f.data?f.data.length:0)}}]),t}(d)),C=(n(242),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).lowerRef=r.a.createRef(),n.upperRef=r.a.createRef(),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"onChangeLow",value:function(){var e=this.selectedMin.toString(),t=this.selectedMin;if(e.length){var n=this.selectedMax||this.props.max;t=Math.max(this.props.min,t),t=Math.min(t,n-1),this.lowerRef.current.value=t,x.startDay=t}}},{key:"onChangeHigh",value:function(){var e=this.selectedMax.toString(),t=this.selectedMax;if(e.length){var n=this.selectedMin||this.props.min;t=Math.max(n+1,t),t=Math.min(t,this.props.max),this.upperRef.current.value=t,x.endDay=t}}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("div",{className:"graph-range-container"},r.a.createElement("form",{onSubmit:this.onSubmit.bind(this)},r.a.createElement("input",{ref:this.lowerRef,min:this.props.min,max:this.props.max,step:1,defaultValue:this.props.min,placeholder:"Start",type:"number",required:!0,onChange:this.onChangeLow.bind(this)}),"\xa0",r.a.createElement("input",{ref:this.upperRef,min:this.props.min,max:this.props.max,step:1,defaultValue:this.props.max,placeholder:"End",type:"number",required:!0,onChange:this.onChangeHigh.bind(this)})))}},{key:"selectedMin",get:function(){return parseFloat(this.lowerRef.current.value)||this.props.min}},{key:"selectedMax",get:function(){return parseFloat(this.upperRef.current.value)||this.props.max}}]),t}(r.a.Component)),O=540,N={Infected:"green",Susceptible:"red",Immune:"steelblue",Dead:"gray"},I=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).graphContainerRef=r.a.createRef(),n.state={visible:!1,tooltip:null,containerWidth:O,graphLabels:{}},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.toggleLabel("Infected"),f.on("data",function(){return e.setState({visible:!0})}),f.on("reset",function(){return e.setState({visible:!1})}),x.on("update",function(){return e.forceUpdate()}),window.addEventListener("resize",this.onResize.bind(this)),this.onResize()}},{key:"componentDidUpdate",value:function(e,t){t.yLabel!==this.state.yLabel&&this.setState({tooltip:null})}},{key:"toggleLabel",value:function(e){var t=Object.assign({},this.state.graphLabels);t[e]=!(e in t)||!t[e],this.setState({graphLabels:t})}},{key:"onGraphClick",value:function(e,t){var n=e.x,a=e.y;this.setState({tooltip:"".concat(Math.round(a)," people on day ").concat(n,".")})}},{key:"onResize",value:function(){var e=this.graphContainerRef.current;e&&this.setState({containerWidth:e.getBoundingClientRect().width})}},{key:"renderLabelButtons",value:function(){var e=this,t=this.state.graphLabels,n=[!0===t.Infected?"2px solid ".concat(N.Infected):null,!0===t.Susceptible?"2px solid ".concat(N.Susceptible):null,!0===t.Immune?"2px solid ".concat(N.Immune):null,!0===t.Dead?"2px solid ".concat(N.Dead):null];return r.a.createElement("div",null,r.a.createElement("button",{style:{color:N.Infected,borderBottom:n[0]},onClick:function(){return e.toggleLabel("Infected")},className:"pointer graph-button"},"Infected"),r.a.createElement("button",{style:{color:N.Susceptible,borderBottom:n[1]},onClick:function(){return e.toggleLabel("Susceptible")},className:"pointer graph-button"},"Susceptible"),r.a.createElement("button",{style:{color:N.Immune,borderBottom:n[2]},onClick:function(){return e.toggleLabel("Immune")},className:"pointer graph-button"},"Immune"),r.a.createElement("button",{style:{color:N.Dead,borderBottom:n[3]},onClick:function(){return e.toggleLabel("Dead")},className:"pointer graph-button"},"Dead"))}},{key:"render",value:function(){if(this.state.visible){var e=x.getData(this.state.graphLabels),t=e.values.length?e.values[0].length:0,n=Math.min(this.state.containerWidth,O);return r.a.createElement("div",{ref:this.graphContainerRef},r.a.createElement("h5",null,e.labels.join(" + ")||"(Nothing Selected)"),this.renderLabelButtons(),r.a.createElement("div",null,r.a.createElement(D.LineChart,{data:e.values,width:n,height:475,margin:{top:10,bottom:50,left:80,right:10},axes:!0,axisLabels:{x:"Days Elapsed",y:"People"},dataPoints:t<0,xDomainRange:[x.startDay,x.endDay],yDomainRange:[0,e.largestY],lineColors:e.labels.map(function(e){return N[e]}),clickHandler:this.onGraphClick.bind(this),style:{".label":{fill:"black"},".axis":{fontSize:"0.75em",fontFamily:"arial"}}})),r.a.createElement("div",null,r.a.createElement(C,{min:1,max:f.data.length||1})),r.a.createElement("div",{className:"text-center"},this.state.tooltip))}return r.a.createElement("div",{ref:this.graphContainerRef})}}]),t}(r.a.Component),M=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(S,null),r.a.createElement("br",null),r.a.createElement("span",{className:"Version"},"V0.2"),r.a.createElement("main",{className:"container card card-body bg-light"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement(b,null)),r.a.createElement("div",{className:"col-lg-6 graph"},r.a.createElement(I,null))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(k,null))),r.a.createElement("footer",{className:"container text-center"},r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},"Juall | Rosenblum | Pojero | Erry"),r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("a",{href:"https://opensource.org/licenses/MIT",target:"_blank"},"MIT License")))))}}]),t}(r.a.Component);s.a.render(r.a.createElement(M,null),document.querySelector("#root"))}},[[107,2,1]]]);
//# sourceMappingURL=main.42287b97.chunk.js.map