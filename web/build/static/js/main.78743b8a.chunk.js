(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports=a(60)},34:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(17),l=a.n(r),s=a(1),o=a(2),u=a(5),c=a(4),m=a(6),h=(a(34),a(36),function(){function e(){Object(s.a)(this,e)}return Object(o.a)(e,null,[{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(a,n){var i="string"===typeof t.method?t.method:"GET",r="string"===typeof t.url?t.url:window.location.origin,l="object"===typeof t.headers&&t.headers?t.headers:{},s="object"===typeof t.query&&t.query?t.query:{},o="undefined"!==typeof t.data?t.data:null,u=new XMLHttpRequest;for(var c in u.onload=function(){return a(u)},u.onerror=function(e){return n(e)},s&&(r+=e.queryString(s)),u.open(i,r),l)u.setRequestHeader(c,l[c]);o?"string"!==typeof o?u.send(JSON.stringify(o)):u.send(o):u.send()})}},{key:"get",value:function(t,a,n){return e.request({method:"GET",url:t,headers:a,query:n})}},{key:"post",value:function(t,a,n){return e.request({method:"POST",url:t,headers:a,data:n})}},{key:"queryString",value:function(e){var t="?";for(var a in e)t+="".concat(a,"=").concat(e[a],"&");return t.substring(0,t.length-1)}}]),e}()),d=new(function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(c.a)(t).call(this))).data=null,e._currentDay=0,e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"load",value:function(e){var t=this;return new Promise(function(a,n){var i=window.location.href.includes("localhost")?"http://localhost:8080/plague":"".concat(window.location.origin,"/plague"),r={"Access-Control-Allow-Origin":window.location.origin,"Access-Control-Allow-Headers":"Access-Control-Allow-Origin"};h.get(i,r,e).then(function(e){if(200===e.status){try{t.data=JSON.parse(e.response)}catch(i){n(i),t.emit(new Event("error"))}a(),t.emit(new Event("load")),t.emit(new Event("data"))}else n(new Error(e.response||"Bad request")),t.emit(new Event("error"))}).catch(function(e){n(e),t.emit(new Event("error"))})})}},{key:"downloadCSV",value:function(e){var t=window.location.href.includes("localhost")?"http://localhost:8080/plague/csv":"".concat(window.location.origin,"/plague/csv");return h.get(t,null,e)}},{key:"createCSVDownloadURL",value:function(e){var t=h.queryString(e);return window.location.href.includes("localhost")?"http://localhost:8080/plague/csv".concat(t):"".concat(window.location.origin,"/plague/csv").concat(t)}},{key:"autoRun",value:function(){this.currentDay=this.data.length-1}},{key:"nextDay",value:function(){this.currentDay<this.data.length&&this.currentDay++}},{key:"reset",value:function(){this.data=null,this.currentDay=0,this.emit(new Event("reset"))}},{key:"currentDay",set:function(e){this._currentDay=e,this.emit(new Event("update"))},get:function(){return this._currentDay}},{key:"hasData",get:function(){return null!==this.data}}]),t}(function(){function e(){Object(s.a)(this,e),this._listeners={}}return Object(o.a)(e,[{key:"emit",value:function(e){this.willTrigger(e.type)&&this._listeners[e.type].forEach(function(t){return t(e)})}},{key:"on",value:function(e,t){this.willTrigger(e)?this._listeners[e].push(t):this._listeners[e]=[t]}},{key:"off",value:function(e,t){if(this.willTrigger(e))for(var a=this._listeners[e],n=0;n<a.length;n++)if(a[n]===t)return a.splice(n,1),!0;return!1}},{key:"willTrigger",value:function(e){return e in this._listeners}}]),e}())),f=(a(38),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).numRef=i.a.createRef(),a.rangeRef=i.a.createRef(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.numRef.current.value=this.props.init||this.props.min,this.rangeRef.current.value=this.props.init||this.props.min}},{key:"onNumber",value:function(e){var t=e.target.value;t=Math.min(Math.max(t,this.props.min),this.props.max),this.rangeRef.current.value=t,this.numRef.current.value=t}},{key:"onSlide",value:function(e){var t=e.target.value;t=Math.min(Math.max(t,this.props.min),this.props.max),this.numRef.current.value=t}},{key:"render",value:function(){return i.a.createElement("div",{className:"num-slider-container"},i.a.createElement("div",null,i.a.createElement("label",null,this.props.label),this.props.showRange?" ".concat(this.minText,"-").concat(this.maxText):null),i.a.createElement("div",null,i.a.createElement("input",{ref:this.numRef,onChange:this.onNumber.bind(this),type:"number",min:this.props.min,max:this.props.max,step:this.props.step,placeholder:this.props.placeholder,required:this.props.required})),i.a.createElement("div",null,i.a.createElement("input",{ref:this.rangeRef,onChange:this.onSlide.bind(this),type:"range",min:this.props.min,max:this.props.max,step:this.props.step})))}},{key:"minText",get:function(){return this.props.minText?this.props.minText:this.props.min}},{key:"maxText",get:function(){return this.props.maxText?this.props.maxText:this.props.max}},{key:"value",get:function(){return this.numRef.current.value}}]),t}(i.a.Component)),p=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).intialImmunityRef=i.a.createRef(),a.virilityRef=i.a.createRef(),a.fatalityRef=i.a.createRef(),a.initialInfectedRef=i.a.createRef(),a.intialPopRef=i.a.createRef(),a.infectionLengthRef=i.a.createRef(),a.daysRef=i.a.createRef(),a.state={pending:!1,message:null,lastBtn:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){d.on("load",this.onSimulatorLoad.bind(this)),d.on("error",this.onSimulatorError.bind(this))}},{key:"getInputsDictionary",value:function(){var e=this.intialImmunityRef.current.value,t=this.virilityRef.current.value,a=this.fatalityRef.current.value,n=this.initialInfectedRef.current.value,i=this.intialPopRef.current.value,r=this.infectionLengthRef.current.value,l=this.daysRef.current.value;return{immune_percent:e,virility:t,fatal_percent:a,initial_infected:n=Math.min(n,i),initial_population:i,infection_length:r,simulation_length:l}}},{key:"onSimulatorError",value:function(){this.setState({pending:!1})}},{key:"onSimulatorLoad",value:function(){this.setState({pending:!1})}},{key:"onReset",value:function(){d.reset()}},{key:"dayByDay",value:function(){var e=this;d.hasData?d.nextDay():(this.setState({pending:!0}),d.load(this.getInputsDictionary()).then(function(){e.setState({message:null}),d.nextDay()}).catch(function(t){return e.setState({message:t.message})}))}},{key:"autoRun",value:function(){var e=this;d.hasData?d.autoRun():(this.setState({pending:!0}),d.load(this.getInputsDictionary()).then(function(){e.setState({message:null}),d.autoRun()}).catch(function(t){return e.setState({message:t.message})}))}},{key:"downloadCSV",value:function(){if(!this.state.pending){var e=d.createCSVDownloadURL(this.getInputsDictionary()),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("target","_blank"),t.setAttribute("download","download"),t.click(),t=null}}},{key:"onSubmit",value:function(e){e.preventDefault(),"day-by-day"===this.state.lastBtn?this.dayByDay():"auto-run"===this.state.lastBtn?this.autoRun():"export-csv"===this.state.lastBtn&&this.downloadCSV()}},{key:"onFormClick",value:function(e){this.setState({lastBtn:e.target.getAttribute("btn")})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h5",{className:"text-center"},"Experimental Variables"),i.a.createElement("form",{onSubmit:this.onSubmit.bind(this)},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"form-group col-lg-6"},i.a.createElement(f,{label:"Length of Infection (Days)",showRange:!0,min:1,max:365,step:1,required:!0,ref:this.infectionLengthRef})),i.a.createElement("div",{className:"form-group col-lg-6"},i.a.createElement(f,{label:"Virility",showRange:!0,min:0,max:20,step:.01,required:!0,ref:this.virilityRef}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"form-group col-lg-6"},i.a.createElement(f,{label:"Fatality Percent",showRange:!0,min:0,max:1,step:.001,required:!0,ref:this.fatalityRef})),i.a.createElement("div",{className:"form-group col-lg-6"},i.a.createElement(f,{label:"Initial Population",showRange:!0,min:1,max:1e6,step:1,required:!0,ref:this.intialPopRef}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"form-group col-lg-6"},i.a.createElement(f,{label:"Initial Immunity Percent",showRange:!0,min:0,max:1,step:.01,required:!0,ref:this.intialImmunityRef})),i.a.createElement("div",{className:"form-group col-lg-6"},i.a.createElement(f,{label:"Initial Infected",showRange:!0,min:0,max:1e6,maxText:"Population",step:1,required:!0,ref:this.initialInfectedRef}))),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"form-group col-lg-6"},i.a.createElement(f,{label:"Simulation Length (Days)",showRange:!0,min:1,max:365,step:1,required:!0,ref:this.daysRef}))),i.a.createElement("div",{className:"form-group text-center"},i.a.createElement("button",{onClick:this.onFormClick.bind(this),className:"input-btn",disabled:this.state.pending,btn:"day-by-day"},"Day-By-Day"),"\xa0",i.a.createElement("button",{onClick:this.onFormClick.bind(this),className:"input-btn",disabled:this.state.pending,btn:"auto-run"},"Auto Run"),"\xa0",i.a.createElement("button",{onClick:this.onReset.bind(this),className:"input-btn",disabled:this.state.pending,type:"button"},"Reset"),"\xa0",i.a.createElement("button",{onClick:this.onFormClick.bind(this),className:"input-btn",disabled:this.state.pending,btn:"export-csv"},"Export CSV"))),i.a.createElement("div",null,this.state.message))}}]),t}(i.a.Component),v=a(27),y=a.n(v),b=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onClick",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(y.a,{isOpen:this.props.showModal},i.a.createElement("span",{className:"close",onClick:this.props.closeModal},"\xd7"),i.a.createElement("h2",{className:"modalHeader"},"Report Bug or Request New Feature"),i.a.createElement("table",{className:"reportsTable"},i.a.createElement("tr",null,i.a.createElement("td",{className:"bugReport"},i.a.createElement("h5",null,"Report Bug:"),i.a.createElement("textarea",{rows:"4",cols:"100"},"Report Bug Here"),i.a.createElement("br",null),i.a.createElement("button",{onClick:this.onClick.bind(this)},"Submit")),i.a.createElement("td",{className:"featureRequest"},i.a.createElement("h5",null,"Request Feature:"),i.a.createElement("textarea",{rows:"4",cols:"100"},"Request Feature Here"),i.a.createElement("br",null),i.a.createElement("button",{onClick:this.onClick.bind(this)},"Submit"))))))}}]),t}(i.a.Component),g=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={showModal:!1,closeModal:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"closeModal",value:function(){this.setState({showModal:!1})}},{key:"openModal",value:function(){this.setState({showModal:!0})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},i.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},i.a.createElement("ul",{className:"navbar-nav mr-auto"},i.a.createElement("li",{className:"nav-item active"},i.a.createElement("span",{className:"nav-link",onClick:this.openModal.bind(this)},"Report Bug ",i.a.createElement("span",{className:"sr-only"},"(current)")))))),i.a.createElement(b,{showModal:this.state.showModal,closeModal:this.closeModal.bind(this)}))}}]),t}(i.a.Component),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={data:null,day:0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){d.on("data",this.onSimulatorData.bind(this)),d.on("reset",this.onSimulatorReset.bind(this)),d.on("update",this.onSimulatorUpdate.bind(this))}},{key:"onSimulatorData",value:function(){this.setState({data:d.data})}},{key:"onSimulatorReset",value:function(){this.setState({data:null,day:0})}},{key:"onSimulatorUpdate",value:function(){this.setState({day:d.currentDay})}},{key:"renderRows",value:function(){if(d.hasData){for(var e,t=new Array(d.currentDay+1),a=0;a<d.currentDay;a++){e=d.data[a];var n=Math.floor(e.susceptible),r=Math.floor(e.infected),l=Math.floor(e.immune),s=Math.floor(e.dead),o=Math.floor(e.total_population);t[a]=i.a.createElement("tr",{key:a},i.a.createElement("td",null,a),i.a.createElement("td",null,n),i.a.createElement("td",null,r),i.a.createElement("td",null,l),i.a.createElement("td",null,s),i.a.createElement("td",null,o))}return t}return null}},{key:"render",value:function(){return null!==this.state.data?i.a.createElement("div",null,i.a.createElement("table",{className:"table table-striped overflow-table"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Day"),i.a.createElement("th",null,"Susceptible"),i.a.createElement("th",null,"Infected"),i.a.createElement("th",null,"Immune"),i.a.createElement("th",null,"Dead"),i.a.createElement("th",null,"Total Population"))),i.a.createElement("tbody",null,this.renderRows()))):null}}]),t}(i.a.Component),w=a(28),R=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={data:null,day:0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){d.on("data",this.onSimulatorData.bind(this)),d.on("reset",this.onSimulatorReset.bind(this)),d.on("update",this.onSimulatorUpdate.bind(this))}},{key:"onSimulatorData",value:function(){var e=d.data.map(function(e,t){return{x:t,y:e.infected}});this.setState({data:e})}},{key:"onSimulatorReset",value:function(){this.setState({data:null,day:0})}},{key:"onSimulatorUpdate",value:function(){this.setState({day:d.currentDay})}},{key:"getData",value:function(){return!this.state.data||this.state.day<1?null:{values:this.state.data.slice(0,this.state.day+1)}}},{key:"render",value:function(){return null!==this.state.data?i.a.createElement("div",null,i.a.createElement("h5",null),i.a.createElement("div",null,i.a.createElement(w.LineChart,{data:this.getData(),axes:!0,width:400,height:400,margin:{top:10,bottom:50,left:80,right:10},xAxis:{label:"Day"},yAxis:{label:"Infected"}}))):null}}]),t}(i.a.Component),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={rows:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(g,null),i.a.createElement("br",null),i.a.createElement("main",{className:"container card card-body bg-light"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-6"},i.a.createElement(p,null)),i.a.createElement("div",{className:"col-lg-6 graph"},i.a.createElement(R,{rows:this.state.rows}))),i.a.createElement("div",{className:"col-lg-12"},i.a.createElement(E,null))))}}]),t}(i.a.Component);l.a.render(i.a.createElement(k,null),document.querySelector("#root"))}},[[29,2,1]]]);
//# sourceMappingURL=main.78743b8a.chunk.js.map